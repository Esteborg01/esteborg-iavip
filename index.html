<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Esteborg IA ¬∑ Entrenamiento ejecutivo en IA aplicada</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root { color-scheme: dark; }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      height: 100%;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Inter", sans-serif;
      background: radial-gradient(circle at top, #28224b 0, #050509 55%, #020208 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 16px 8px 32px;
      overflow-y: auto;
    }

    #app {
      width: 100%;
      display: flex;
      justify-content: center;
    }

    .shell {
      position: relative;
      width: 100%;
      max-width: 980px;
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background:
        radial-gradient(circle at top left, rgba(94, 234, 212, 0.12), transparent 50%),
        radial-gradient(circle at bottom right, rgba(129, 140, 248, 0.25), transparent 55%),
        linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      box-shadow:
        0 22px 60px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(15, 23, 42, 0.9);
      padding: 18px 16px 14px;
      overflow: hidden;
    }

    .shell::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 0% 0%, rgba(236, 72, 153, 0.16), transparent 52%),
        radial-gradient(circle at 100% 0%, rgba(56, 189, 248, 0.16), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .shell::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 24px;
      background: radial-gradient(circle at 50% -20%, rgba(148, 163, 184, 0.3), transparent 60%);
      opacity: 0.4;
      pointer-events: none;
      mix-blend-mode: soft-light;
    }

    .shell > * {
      position: relative;
      z-index: 1;
    }

    .banner-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 4px;
    }

    .banner-avatar {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 0, #a855f7, #6366f1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.08em;
      color: #f9fafb;
      box-shadow:
        0 0 0 1px rgba(129, 140, 248, 0.7),
        0 10px 30px rgba(79, 70, 229, 0.65);
    }

    .banner-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .banner-title-main {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: rgba(156, 163, 175, 0.95);
    }

    .banner-title-sub {
      font-size: 20px;
      font-weight: 650;
      letter-spacing: 0.02em;
      color: rgba(243, 244, 246, 0.98);
    }

    .banner-description {
      font-size: 13px;
      line-height: 1.5;
      color: rgba(156, 163, 175, 0.95);
      margin-bottom: 10px;
      max-width: 780px;
    }

    .panel {
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.1), rgba(15, 23, 42, 0.98)),
        radial-gradient(circle at bottom right, rgba(129, 140, 248, 0.22), rgba(15, 23, 42, 1));
      box-shadow:
        inset 0 0 0 1px rgba(15, 23, 42, 0.95),
        0 18px 40px rgba(15, 23, 42, 0.95);
      padding: 14px 14px 12px;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 8px;
    }

    .panel-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: rgba(229, 231, 235, 0.98);
    }

    .panel-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      border: 1px solid rgba(52, 211, 153, 0.6);
      color: #a7f3d0;
      background: radial-gradient(circle at top left, rgba(16, 185, 129, 0.35), rgba(15, 23, 42, 0.98));
      padding: 4px 8px 3px;
      border-radius: 999px;
    }

    .panel-badge .dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at center, #22c55e, #15803d);
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.85);
    }

    .chips-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
      font-size: 11px;
      color: rgba(156, 163, 175, 0.95);
    }

    .chips-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: rgba(107, 114, 128, 0.96);
      margin-right: 2px;
      white-space: nowrap;
    }

    .chip-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 6px 11px;
      font-size: 11px;
      background:
        radial-gradient(circle at top left, rgba(30, 64, 175, 0.55), rgba(15, 23, 42, 0.98));
      color: rgba(229, 231, 235, 0.98);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      transition:
        background 0.15s ease,
        border-color 0.15s ease,
        box-shadow 0.15s ease,
        transform 0.08s ease;
      white-space: nowrap;
    }

    .chip-btn.starter {
      border-color: rgba(248, 250, 252, 0.9);
      background:
        radial-gradient(circle at top left, rgba(251, 191, 36, 0.35), rgba(15, 23, 42, 0.98));
      box-shadow: 0 12px 30px rgba(251, 191, 36, 0.2);
    }

    .chip-btn:hover {
      border-color: rgba(248, 250, 252, 1);
      background:
        radial-gradient(circle at top left, rgba(129, 140, 248, 0.5), rgba(15, 23, 42, 0.98));
      transform: translateY(-0.5px);
      box-shadow: 0 10px 26px rgba(129, 140, 248, 0.45);
    }

    .chip-btn:active {
      transform: translateY(0.4px);
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.95);
    }

    .chip-btn::after {
      content: "‚Üó";
      font-size: 9px;
      opacity: 0.7;
    }

    .content-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 6px;
      font-size: 11px;
      color: rgba(156, 163, 175, 0.95);
    }

    .content-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: rgba(107, 114, 128, 0.96);
      margin-right: 2px;
      white-space: nowrap;
    }

    .content {
      border-radius: 999px;
      border: 1px solid rgba(59, 130, 246, 0.9);
      padding: 6px 11px;
      font-size: 11px;
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.24), rgba(15, 23, 42, 0.98));
      color: rgba(229, 231, 235, 0.98);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      transition:
        background 0.15s ease,
        border-color 0.15s ease,
        box-shadow 0.15s ease,
        transform 0.08s ease;
      white-space: nowrap;
    }

    .content:hover {
      border-color: rgba(96, 165, 250, 1);
      background:
        radial-gradient(circle at top left, rgba(59, 130, 246, 0.45), rgba(15, 23, 42, 0.98));
      transform: translateY(-0.5px);
      box-shadow: 0 12px 32px rgba(37, 99, 235, 0.65);
    }

    .content:active {
      transform: translateY(0.4px);
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.95);
    }

    .content::after {
      content: "‚Üó";
      font-size: 9px;
      opacity: 0.7;
    }

    .chat-container {
      margin-top: 8px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background:
        radial-gradient(circle at top left, rgba(37, 99, 235, 0.28), rgba(15, 23, 42, 0.98)),
        radial-gradient(circle at bottom right, rgba(8, 47, 73, 0.9), rgba(15, 23, 42, 1));
      box-shadow:
        inset 0 0 0 1px rgba(15, 23, 42, 0.98),
        0 18px 40px rgba(15, 23, 42, 0.98);
      padding: 10px 10px 9px;
    }

    .chat-header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .chat-header-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .chat-node {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0, #a855f7, #6366f1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 700;
      letter-spacing: 0.08em;
      box-shadow:
        0 0 0 1px rgba(129, 140, 248, 0.7),
        0 10px 26px rgba(79, 70, 229, 0.6);
      color: #f9fafb;
    }

    .chat-title {
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .chat-title div {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      color: rgba(229, 231, 235, 0.98);
    }

    .chat-title small {
      font-size: 11px;
      color: rgba(156, 163, 175, 0.95);
    }

    .chat-language-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 0.98));
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.98);
    }

    .lang-option {
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      cursor: pointer;
    }

    .lang-option.active {
      border-color: rgba(96, 165, 250, 1);
      background:
        radial-gradient(circle at top left, rgba(59, 130, 246, 0.88), rgba(37, 99, 235, 0.98));
      color: #f9fafb;
      box-shadow: 0 10px 24px rgba(37, 99, 235, 0.8);
    }

    #chat-log {
      margin-top: 6px;
      border-radius: 12px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      border: 1px solid rgba(30, 64, 175, 0.7);
      box-shadow:
        inset 0 0 0 1px rgba(15, 23, 42, 0.98),
        0 14px 34px rgba(15, 23, 42, 0.96);
      padding: 8px 10px 9px;
      max-height: 430px;
      min-height: 200px;
      overflow-y: auto;
      font-size: 13px;
      color: rgba(229, 231, 235, 0.98);
    }

    .message {
      display: flex;
      margin-bottom: 8px;
    }

    .message.assistant {
      justify-content: flex-start;
    }

    .message.user {
      justify-content: flex-end;
    }

    .bubble {
      max-width: 94%;
      padding: 7px 10px;
      border-radius: 11px;
      font-size: 13px;
      line-height: 1.5;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .assistant .bubble {
      background:
        radial-gradient(circle at top left, rgba(37, 99, 235, 0.96), rgba(30, 64, 175, 0.98));
      border: 1px solid rgba(191, 219, 254, 0.9);
      color: #f9fafb;
      box-shadow:
        0 12px 30px rgba(37, 99, 235, 0.75),
        0 0 0 1px rgba(15, 23, 42, 0.96);
    }

    .user .bubble {
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      border: 1px solid rgba(148, 163, 184, 0.95);
      color: rgba(229, 231, 235, 0.98);
      box-shadow:
        0 12px 30px rgba(15, 23, 42, 0.98),
        0 0 0 1px rgba(15, 23, 42, 0.98);
    }

    .input-row {
      margin-top: 6px;
      display: flex;
      gap: 6px;
      align-items: flex-end;
    }

    #user-input {
      flex: 1;
      min-height: 44px;
      max-height: 120px;
      resize: vertical;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      color: rgba(229, 231, 235, 0.98);
      font-size: 13px;
      outline: none;
      box-shadow:
        inset 0 0 0 1px rgba(15, 23, 42, 0.98),
        0 10px 26px rgba(15, 23, 42, 0.96);
    }

    #user-input::placeholder {
      color: rgba(107, 114, 128, 0.96);
    }

    .mic-button,
    .send-button {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      padding: 8px 11px;
      font-size: 11px;
      font-weight: 500;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      color: rgba(229, 231, 235, 0.98);
      box-shadow:
        0 10px 26px rgba(15, 23, 42, 0.96),
        0 0 0 1px rgba(15, 23, 42, 0.96);
      flex-shrink: 0;
    }

    .mic-button {
      width: 36px;
      padding: 0;
      font-size: 18px;
    }

    .send-button {
      background:
        radial-gradient(circle at top left, rgba(37, 99, 235, 0.96), rgba(30, 64, 175, 0.98));
      border-color: rgba(191, 219, 254, 0.9);
      box-shadow:
        0 12px 30px rgba(37, 99, 235, 0.8),
        0 0 0 1px rgba(15, 23, 42, 0.96);
    }

    .mic-button:hover,
    .send-button:hover {
      transform: translateY(-0.5px);
      box-shadow:
        0 14px 34px rgba(15, 23, 42, 0.98),
        0 0 0 1px rgba(15, 23, 42, 0.98);
    }

    .mic-button:active,
    .send-button:active {
      transform: translateY(0.4px);
      box-shadow:
        0 8px 20px rgba(15, 23, 42, 0.98),
        0 0 0 1px rgba(15, 23, 42, 0.98);
    }

    .status-line {
      margin-top: 4px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: rgba(148, 163, 184, 0.95);
    }

    .status-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at center, #22c55e, #15803d);
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.85);
    }

    .voice-row {
      margin-top: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      font-size: 11px;
      color: rgba(148, 163, 184, 0.95);
    }

    .voice-toggle {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .voice-toggle input[type="checkbox"] {
      width: 30px;
      height: 16px;
      appearance: none;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 1));
      position: relative;
      cursor: pointer;
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.98);
    }

    .voice-toggle input[type="checkbox"]::after {
      content: "";
      position: absolute;
      top: 1px;
      left: 2px;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0, #e5e7eb, #9ca3af);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.4),
        0 4px 10px rgba(15, 23, 42, 0.9);
      transition: transform 0.16s ease;
    }

    .voice-toggle input[type="checkbox"]:checked::after {
      transform: translateX(12px);
      background: radial-gradient(circle at 30% 0, #a855f7, #6366f1);
    }

    .voice-pill {
      border-radius: 999px;
      border: 1px solid rgba(129, 140, 248, 0.9);
      padding: 4px 9px;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      background:
        radial-gradient(circle at top left, rgba(129, 140, 248, 0.25), rgba(15, 23, 42, 0.98));
      color: rgba(229, 231, 235, 0.98);
      box-shadow:
        0 10px 24px rgba(129, 140, 248, 0.6),
        0 0 0 1px rgba(15, 23, 42, 0.95);
    }

    .footer-row {
      margin-top: 6px;
      padding-top: 7px;
      border-top: 1px solid rgba(148, 163, 184, 0.5);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      justify-content: space-between;
      font-size: 10px;
      color: rgba(107, 114, 128, 0.96);
    }

    .footer-left {
      max-width: 70%;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .footer-right {
      text-align: right;
    }

    .footer-row a {
      color: #a5b4fc;
      text-decoration: none;
    }

    .footer-row a:hover {
      text-decoration: underline;
    }

    @media (max-width: 720px) {
      .shell {
        padding: 14px 12px 10px;
        border-radius: 20px;
      }

      .panel {
        padding: 12px 10px 10px;
      }

      .panel-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }

      .footer-left {
        max-width: 100%;
      }

      #chat-log {
        max-height: 380px;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="shell">
      <div class="banner-header">
        <div class="banner-avatar">E</div>
        <div class="banner-title">
          <div class="banner-title-main" id="i-banner-main">
            ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP
          </div>
          <div class="banner-title-sub" id="i-banner-sub">
            Entrenamiento de Comunicaci√≥n con Inteligencia Emocional
          </div>
        </div>
      </div>

      <div class="banner-description" id="i-banner-desc">
        EsteborgCom7 es tu entrenador ejecutivo de comunicaci√≥n. Aqu√≠ trabajas
        tus conversaciones clave con un enfoque pr√°ctico, usando gu√≠as,
        lecciones y retos dise√±ados para que tu mente sea tu ventaja.
      </div>

      <div class="panel">
        <div class="panel-header">
          <div class="panel-title" id="i-panel-title">
            Mini entrenamiento ¬∑ Comunicaci√≥n con EsteborgCom7
          </div>
          <div class="panel-badge">
            <span class="dot"></span>
            <span>Members VIP</span>
          </div>
        </div>

        <!-- CHIPS: SESI√ìN -->
        <div class="chips-row">
          <span class="chips-label" id="i-chips-label">Comenzar sesi√≥n:</span>
          <button
            class="chip-btn starter"
            id="i-btn-lesson"
            data-text="Quiero iniciar la Lecci√≥n 1 de comunicaci√≥n con inteligencia emocional."
          >
            Iniciar Lecci√≥n 1
          </button>
          <button
            class="chip-btn starter"
            id="i-btn-emotion"
            data-text="Quiero trabajar mi inteligencia emocional en una conversaci√≥n importante."
          >
            Inteligencia Emocional
          </button>
          <button
            class="chip-btn starter"
            id="i-btn-challenge"
            data-text="Dame un reto pr√°ctico de comunicaci√≥n para hoy."
          >
            Iniciar retos
          </button>
        </div>

        <!-- CHIPS: CONTENIDO -->
        <div class="content-row">
          <span class="content-label" id="i-content-label">Contenido visual:</span>
          <button
            class="content"
            id="i-btn-slides"
            data-text="Quiero las diapositivas del entrenamiento para repasarlas despu√©s de la sesi√≥n."
          >
            Ver diapositivas del entrenamiento
          </button>
          <button
            class="content"
            id="i-btn-summary"
            data-text="Dame un resumen descargable con los puntos clave de lo que trabajemos hoy."
          >
            Resumen descargable
          </button>
        </div>

        <!-- CHAT -->
        <div class="chat-container">
          <div class="chat-header-row">
            <div class="chat-header-left">
              <div class="chat-node">E</div>
              <div class="chat-title">
                <div id="i-chat-name">Esteborg</div>
                <small id="i-chat-role">Entrenador de comunicaci√≥n</small>
              </div>
            </div>

            <div class="chat-language-pill">
              <span class="lang-option active" data-lang="es">ES</span>
              <span class="lang-option" data-lang="en">EN</span>
              <span class="lang-option" data-lang="pt">PT</span>
              <span class="lang-option" data-lang="fr">FR</span>
              <span class="lang-option" data-lang="it">IT</span>
              <span class="lang-option" data-lang="de">DE</span>
            </div>
          </div>

          <div id="chat-log"></div>

          <div class="input-row">
            <textarea
              id="user-input"
              placeholder="Cu√©ntame una situaci√≥n real de comunicaci√≥n que quieras mejorar..."
            ></textarea>
            <button id="mic-btn" class="mic-button" title="Hablar con voz">üéôÔ∏è</button>
            <button id="send-btn" class="send-button">ENVIAR</button>
          </div>

          <div class="status-line" id="status-line">
            <span class="status-dot"></span>
            <span>Preparando tu sesi√≥n con Esteborg...</span>
          </div>

          <div class="voice-row">
            <label class="voice-toggle">
              <input type="checkbox" id="tts-toggle" />
              <span id="i-voice-toggle-label">Voz Esteborg activada</span>
            </label>
            <div class="voice-pill" id="i-voice-pill">üéß Voz Esteborg</div>
          </div>
        </div>

        <!-- FOOTER -->
        <div class="footer-row">
          <div class="footer-left">
            <strong id="i-footer-token-title">Tokken Esteborg Members</strong>
            <span id="i-footer-token-text">
              Si a√∫n no tienes token, puedes obtenerlo o recuperarlo en:
              https://membersvip.esteborg.live/#miembrosvip
            </span>
          </div>
          <div class="footer-right">
            Propiedad de Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg<br />
            <a href="https://esteborg.com" target="_blank" rel="noopener noreferrer">
              esteborg.com
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ========== CONFIG ==========
    const API_BASE = "https://esteborg88full-backend-modular.onrender.com";
    const MODULE_PATH = "/api/modules/iavipcom";
    const TTS_URL = API_BASE + "/api/voice";

    // ========== I18N ==========
    const I18N = {
      es: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Entrenamiento de Comunicaci√≥n con Inteligencia Emocional",
        bannerDesc:
          "EsteborgCom7 es tu entrenador ejecutivo de comunicaci√≥n. Aqu√≠ trabajas tus conversaciones clave con un enfoque pr√°ctico, usando gu√≠as, lecciones y retos dise√±ados para que tu mente sea tu ventaja.",
        panelTitle: "Mini entrenamiento ¬∑ Comunicaci√≥n con EsteborgCom7",
        chipsLabel: "Comenzar sesi√≥n:",
        btnLesson: "Iniciar Lecci√≥n 1",
        btnLessonText:
          "Quiero iniciar la Lecci√≥n 1 de comunicaci√≥n con inteligencia emocional.",
        btnEmotion: "Inteligencia Emocional",
        btnEmotionText:
          "Quiero trabajar mi inteligencia emocional en una conversaci√≥n importante.",
        btnChallenge: "Iniciar retos",
        btnChallengeText: "Dame un reto pr√°ctico de comunicaci√≥n para hoy.",
        contentLabel: "Contenido visual:",
        btnSlides: "Ver diapositivas del entrenamiento",
        btnSlidesText:
          "Quiero las diapositivas del entrenamiento para repasarlas despu√©s de la sesi√≥n.",
        btnSummary: "Resumen descargable",
        btnSummaryText:
          "Dame un resumen descargable con los puntos clave de lo que trabajemos hoy.",
        inputPlaceholder:
          "Cu√©ntame una situaci√≥n real de comunicaci√≥n que quieras mejorar...",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Si a√∫n no tienes token, puedes obtenerlo o recuperarlo en: https://membersvip.esteborg.live/#miembrosvip",
        chatName: "Esteborg",
        chatRole: "Entrenador de comunicaci√≥n",
        voiceToggleLabel: "Voz Esteborg activada",
        voicePillLabel: "üéß Voz Esteborg",
        sendButtonLabel: "ENVIAR",
        statusInitialWithToken:
          "Detect√© un Tokken en la URL o guardado ¬∑ lo usar√© autom√°ticamente en tu sesi√≥n.",
        statusInitialNoToken:
          "Demo activa ¬∑ si generas tu Tokken VIP en Members, lo usar√© autom√°ticamente.",
        statusTokenManual:
          "Tokken pegado manualmente ¬∑ usar√© ese Tokken en tu sesi√≥n.",
        statusTokenValid: "Modo Members activo ¬∑ Tokken VIP v√°lido.",
        statusTokenInvalid:
          "Tokken inv√°lido o expirado ¬∑ usando modo demo. Genera uno nuevo en Members.",
        statusDemoEnded:
          "Demo finalizada ¬∑ renueva tu acceso para seguir con EsteborgCom7.",
        statusDemoActive:
          "Demo activa ¬∑ si generas tu Tokken VIP en Members, lo usar√© autom√°ticamente.",
        statusListening: "Escuchando... habla ahora.",
        statusProcessingSpeech: "Procesando lo que dijiste...",
        statusMicError:
          "Hubo un problema con el micr√≥fono, intenta de nuevo.",
        statusTextCaptured:
          "Texto capturado, puedes enviarlo o editarlo.",
        statusTTSOn: "Voz Esteborg activada.",
        statusTTSOff: "Voz Esteborg desactivada.",
        statusLangCurrent: "Idioma cambiado a espa√±ol.",
        tokenPasteReply:
          "Perfecto, ya tengo tu Tokken Esteborg Members ‚úÖ\nAhora dime: ¬øquieres que trabajemos tus situaciones de comunicaci√≥n en \"espa√±ol\", \"ingl√©s\", \"portugu√©s\", \"franc√©s\", \"italiano\" o \"alem√°n\"?",
        tokenWelcomeMessage:
          "‚úÖ Tu Tokken Esteborg Members est√° validado.\nEst√°s en modo Members VIP, as√≠ que podemos trabajar tus situaciones reales de comunicaci√≥n con acceso completo.",
        welcomeMessage:
          "üëã Bienvenido a Esteborg IA ‚Äì Despliega todo tu poder. Soy tu gu√≠a oficial en este programa de formaci√≥n en Inteligencia Artificial.\n\nAntes de empezar, necesito tu Tokken Esteborg Members para validar tu acceso.\n\nSi a√∫n no tienes token, puedes obtenerlo o recuperarlo en: https://membersvip.esteborg.live/#miembrosvip\n\nUna vez que tengas tu Tokken, p√©galo aqu√≠ o accede desde tu panel Members VIP. Despu√©s elige el idioma en la parte superior (ES, EN, PT, FR, IT, DE) y comenzamos con tu entrenamiento."
      },
      en: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Communication Training with Emotional Intelligence",
        bannerDesc:
          "EsteborgCom7 is your executive communication coach. Here you work on your key conversations with a practical approach, using guides, lessons and challenges designed to make your mind your advantage.",
        panelTitle: "Mini Training ¬∑ Communication with EsteborgCom7",
        chipsLabel: "Start session:",
        btnLesson: "Start Lesson 1",
        btnLessonText:
          "I want to start Lesson 1 on communication with emotional intelligence.",
        btnEmotion: "Emotional intelligence",
        btnEmotionText:
          "I want to work on my emotional intelligence in an important conversation.",
        btnChallenge: "Start challenges",
        btnChallengeText: "Give me a practical communication challenge for today.",
        contentLabel: "Visual content:",
        btnSlides: "View training slides",
        btnSlidesText:
          "I want the training slides so I can review them after the session.",
        btnSummary: "Downloadable summary",
        btnSummaryText:
          "Give me a downloadable summary with the key points of what we worked on today.",
        inputPlaceholder:
          "Tell me about a real communication situation you want to improve...",
        footerTokenTitle: "Esteborg Members Token",
        footerTokenText:
          "If you don‚Äôt have a token yet, you can get or recover it at: https://membersvip.esteborg.live/#miembrosvip",
        chatName: "Esteborg",
        chatRole: "Communication coach",
        voiceToggleLabel: "Esteborg voice enabled",
        voicePillLabel: "üéß Esteborg Voice",
        sendButtonLabel: "SEND",
        statusInitialWithToken:
          "I detected a token in the URL or stored locally ¬∑ I‚Äôll use it automatically in your session.",
        statusInitialNoToken:
          "Demo mode is active ¬∑ if you generate your VIP token in Members, I‚Äôll use it automatically.",
        statusTokenManual:
          "Token pasted manually ¬∑ I‚Äôll use that token in your session.",
        statusTokenValid: "Members mode active ¬∑ VIP token valid.",
        statusTokenInvalid:
          "Invalid or expired token ¬∑ using demo mode. Generate a new one in Members.",
        statusDemoEnded:
          "Demo finished ¬∑ renew your access to continue with EsteborgCom7.",
        statusDemoActive:
          "Demo mode is active ¬∑ if you generate your VIP token in Members, I‚Äôll use it automatically.",
        statusListening: "Listening... speak now.",
        statusProcessingSpeech: "Processing what you said...",
        statusMicError:
          "There was a problem with the microphone, please try again.",
        statusTextCaptured:
          "Text captured, you can send or edit it.",
        statusTTSOn: "Esteborg voice enabled.",
        statusTTSOff: "Esteborg voice disabled.",
        statusLangCurrent: "Language set to English.",
        tokenPasteReply:
          "Perfect, I‚Äôve got your Esteborg Members Token ‚úÖ\nNow tell me: do you want us to work on your communication situations in Spanish, English, Portuguese, French, Italian or German?",
        tokenWelcomeMessage:
          "‚úÖ Your Esteborg Members Token is validated.\nYou‚Äôre in Members VIP mode, so we can work on your real communication situations with full access.",
        welcomeMessage:
          "üëã Welcome to Esteborg IA ‚Äì Unleash all your power. I am your official guide in this Artificial Intelligence training program.\n\nBefore we start, I need your Esteborg Members Token to validate your access.\n\nIf you don‚Äôt have a token yet, you can get or recover it at: https://membersvip.esteborg.live/#miembrosvip\n\nOnce you have your token, paste it here or access through your Members VIP panel. Then choose the language at the top (ES, EN, PT, FR, IT, DE) and we‚Äôll start your training."
      },
      pt: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Treinamento em comunica√ß√£o com intelig√™ncia emocional",
        bannerDesc:
          "EsteborgCom7 √© o seu treinador executivo de comunica√ß√£o. Aqui voc√™ trabalha suas conversas-chave com uma abordagem pr√°tica, usando guias, li√ß√µes e desafios pensados para que sua mente seja a sua vantagem.",
        panelTitle: "Mini treinamento ¬∑ Comunica√ß√£o com EsteborgCom7",
        chipsLabel: "Iniciar sess√£o:",
        btnLesson: "Iniciar Li√ß√£o 1",
        btnLessonText:
          "Quero iniciar a Li√ß√£o 1 de comunica√ß√£o com intelig√™ncia emocional.",
        btnEmotion: "Intelig√™ncia emocional",
        btnEmotionText:
          "Quero trabalhar minha intelig√™ncia emocional em uma conversa importante.",
        btnChallenge: "Iniciar desafios",
        btnChallengeText: "Me d√™ um desafio pr√°tico de comunica√ß√£o para hoje.",
        contentLabel: "Conte√∫do visual:",
        btnSlides: "Ver slides do treinamento",
        btnSlidesText:
          "Quero os slides do treinamento para revis√°-los depois da sess√£o.",
        btnSummary: "Resumo para download",
        btnSummaryText:
          "Me d√™ um resumo para download com os pontos principais do que trabalharmos hoje.",
        inputPlaceholder:
          "Conte-me uma situa√ß√£o real de comunica√ß√£o que voc√™ quer melhorar...",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Se voc√™ ainda n√£o tem token, pode obt√™-lo ou recuper√°-lo em: https://membersvip.esteborg.live/#miembrosvip",
        chatName: "Esteborg",
        chatRole: "Treinador de comunica√ß√£o",
        voiceToggleLabel: "Voz Esteborg ativada",
        voicePillLabel: "üéß Voz Esteborg",
        sendButtonLabel: "ENVIAR",
        statusInitialWithToken:
          "Detectei um Tokken na URL ou salvo ¬∑ vou us√°-lo automaticamente na sua sess√£o.",
        statusInitialNoToken:
          "Demo ativa ¬∑ se voc√™ gerar seu Tokken VIP no Members, vou us√°-lo automaticamente.",
        statusTokenManual:
          "Tokken colado manualmente ¬∑ vou usar esse Tokken na sua sess√£o.",
        statusTokenValid: "Modo Members ativo ¬∑ Tokken VIP v√°lido.",
        statusTokenInvalid:
          "Tokken inv√°lido ou expirado ¬∑ usando modo demo. Gere um novo no Members.",
        statusDemoEnded:
          "Demo finalizada ¬∑ renove seu acesso para continuar com EsteborgCom7.",
        statusDemoActive:
          "Demo ativa ¬∑ se voc√™ gerar seu Tokken VIP no Members, vou us√°-lo automaticamente.",
        statusListening: "Ouvindo... fale agora.",
        statusProcessingSpeech: "Processando o que voc√™ disse...",
        statusMicError:
          "Houve um problema com o microfone, tente novamente.",
        statusTextCaptured:
          "Texto capturado, voc√™ pode enviar ou editar.",
        statusTTSOn: "Voz Esteborg ativada.",
        statusTTSOff: "Voz Esteborg desativada.",
        statusLangCurrent: "Idioma alterado para portugu√™s.",
        tokenPasteReply:
          "Perfeito, j√° tenho seu Tokken Esteborg Members ‚úÖ\nAgora me diga: quer trabalhar suas situa√ß√µes de comunica√ß√£o em espanhol, ingl√™s, portugu√™s, franc√™s, italiano ou alem√£o?",
        tokenWelcomeMessage:
          "‚úÖ Seu Tokken Esteborg Members foi validado.\nVoc√™ est√° no modo Members VIP, ent√£o podemos trabalhar suas situa√ß√µes reais de comunica√ß√£o com acesso completo.",
        welcomeMessage:
          "üëã Bem-vindo ao Esteborg IA ‚Äì Libere todo o seu poder. Sou o seu guia oficial neste programa de forma√ß√£o em Intelig√™ncia Artificial.\n\nAntes de come√ßar, preciso do seu Tokken Esteborg Members para validar o seu acesso.\n\nSe voc√™ ainda n√£o tem token, pode obt√™-lo ou recuper√°-lo em: https://membersvip.esteborg.live/#miembrosvip\n\nQuando tiver o seu Tokken, cole aqui ou acesse pelo seu painel Members VIP. Depois escolha o idioma na parte superior (ES, EN, PT, FR, IT, DE) e come√ßamos o seu treinamento."
      },
      fr: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Entra√Ænement √† la communication avec intelligence √©motionnelle",
        bannerDesc:
          "EsteborgCom7 est ton coach ex√©cutif en communication. Ici, tu travailles tes conversations cl√©s avec une approche pratique, en utilisant des guides, des le√ßons et des d√©fis pens√©s pour faire de ton esprit ton meilleur atout.",
        panelTitle: "Mini formation ¬∑ Communication avec EsteborgCom7",
        chipsLabel: "Commencer la session :",
        btnLesson: "Commencer la Le√ßon 1",
        btnLessonText:
          "Je veux commencer la Le√ßon 1 sur la communication avec intelligence √©motionnelle.",
        btnEmotion: "Intelligence √©motionnelle",
        btnEmotionText:
          "Je veux travailler mon intelligence √©motionnelle dans une conversation importante.",
        btnChallenge: "Commencer les d√©fis",
        btnChallengeText:
          "Donne-moi un d√©fi pratique de communication pour aujourd‚Äôhui.",
        contentLabel: "Contenu visuel :",
        btnSlides: "Voir les diapositives de la formation",
        btnSlidesText:
          "Je veux les diapositives de la formation pour les revoir apr√®s la session.",
        btnSummary: "R√©sum√© t√©l√©chargeable",
        btnSummaryText:
          "Donne-moi un r√©sum√© t√©l√©chargeable avec les points cl√©s de ce que nous aurons travaill√© aujourd‚Äôhui.",
        inputPlaceholder:
          "Raconte-moi une situation de communication r√©elle que tu souhaites am√©liorer...",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Si tu n‚Äôas pas encore de token, tu peux l‚Äôobtenir ou le r√©cup√©rer ici : https://membersvip.esteborg.live/#miembrosvip",
        chatName: "Esteborg",
        chatRole: "Coach en communication",
        voiceToggleLabel: "Voix Esteborg activ√©e",
        voicePillLabel: "üéß Voix Esteborg",
        sendButtonLabel: "ENVOYER",
        statusInitialWithToken:
          "J‚Äôai d√©tect√© un Tokken dans l‚ÄôURL ou en local ¬∑ je l‚Äôutiliserai automatiquement dans ta session.",
        statusInitialNoToken:
          "D√©mo active ¬∑ si tu g√©n√®res ton Tokken VIP sur Members, je l‚Äôutiliserai automatiquement.",
        statusTokenManual:
          "Tokken coll√© manuellement ¬∑ je vais utiliser ce Tokken dans ta session.",
        statusTokenValid: "Mode Members actif ¬∑ Tokken VIP valide.",
        statusTokenInvalid:
          "Tokken invalide ou expir√© ¬∑ utilisation du mode d√©mo. G√©n√®re-en un nouveau sur Members.",
        statusDemoEnded:
          "D√©mo termin√©e ¬∑ renouvelle ton acc√®s pour continuer avec EsteborgCom7.",
        statusDemoActive:
          "D√©mo active ¬∑ si tu g√©n√®res ton Tokken VIP sur Members, je l‚Äôutiliserai automatiquement.",
        statusListening: "√âcoute en cours... tu peux parler.",
        statusProcessingSpeech: "Je traite ce que tu as dit...",
        statusMicError:
          "Il y a eu un probl√®me avec le micro, r√©essaie.",
        statusTextCaptured:
          "Texte captur√©, tu peux l‚Äôenvoyer ou le modifier.",
        statusTTSOn: "Voix Esteborg activ√©e.",
        statusTTSOff: "Voix Esteborg d√©sactiv√©e.",
        statusLangCurrent: "Langue r√©gl√©e sur le fran√ßais.",
        tokenPasteReply:
          "Parfait, j‚Äôai ton Tokken Esteborg Members ‚úÖ\nDis-moi maintenant : veux-tu que l‚Äôon travaille tes situations de communication en espagnol, anglais, portugais, fran√ßais, italien ou allemand ?",
        tokenWelcomeMessage:
          "‚úÖ Ton Tokken Esteborg Members est valid√©.\nTu es en mode Members VIP, nous pouvons donc travailler tes situations r√©elles de communication avec un acc√®s complet.",
        welcomeMessage:
          "üëã Bienvenue sur Esteborg IA ‚Äì Lib√®re tout ton potentiel. Je suis ton guide officiel dans ce programme de formation en intelligence artificielle.\n\nAvant de commencer, j‚Äôai besoin de ton Tokken Esteborg Members pour valider ton acc√®s.\n\nSi tu n‚Äôas pas encore de token, tu peux l‚Äôobtenir ou le r√©cup√©rer ici : https://membersvip.esteborg.live/#miembrosvip\n\nUne fois que tu as ton Tokken, colle-le ici ou passe par ton espace Members VIP. Ensuite, choisis la langue en haut (ES, EN, PT, FR, IT, DE) et nous commen√ßons ta formation."
      },
      it: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Formazione alla comunicazione con intelligenza emotiva",
        bannerDesc:
          "EsteborgCom7 √® il tuo coach executive di comunicazione. Qui lavori sulle tue conversazioni chiave con un approccio pratico, usando guide, lezioni e sfide pensate per fare della tua mente il tuo vantaggio.",
        panelTitle: "Mini training ¬∑ Comunicazione con EsteborgCom7",
        chipsLabel: "Inizia la sessione:",
        btnLesson: "Inizia lezione 1",
        btnLessonText:
          "Voglio iniziare la lezione 1 sulla comunicazione con intelligenza emotiva.",
        btnEmotion: "Intelligenza emotiva",
        btnEmotionText:
          "Voglio lavorare sulla mia intelligenza emotiva in una conversazione importante.",
        btnChallenge: "Inizia le sfide",
        btnChallengeText:
          "Dammi una sfida pratica di comunicazione per oggi.",
        contentLabel: "Contenuto visivo:",
        btnSlides: "Vedi le slide della formazione",
        btnSlidesText:
          "Voglio le slide della formazione per rivederle dopo la sessione.",
        btnSummary: "Riassunto scaricabile",
        btnSummaryText:
          "Dammi un riassunto scaricabile con i punti chiave di ci√≤ che lavoreremo oggi.",
        inputPlaceholder:
          "Raccontami una situazione reale di comunicazione che vuoi migliorare...",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Se non hai ancora un token, puoi ottenerlo o recuperarlo qui: https://membersvip.esteborg.live/#miembrosvip",
        chatName: "Esteborg",
        chatRole: "Coach di comunicazione",
        voiceToggleLabel: "Voce Esteborg attivata",
        voicePillLabel: "üéß Voce Esteborg",
        sendButtonLabel: "INVIA",
        statusInitialWithToken:
          "Ho rilevato un Tokken nell‚ÄôURL o salvato ¬∑ lo user√≤ automaticamente nella tua sessione.",
        statusInitialNoToken:
          "Demo attiva ¬∑ se generi il tuo Tokken VIP su Members, lo user√≤ automaticamente.",
        statusTokenManual:
          "Tokken incollato manualmente ¬∑ user√≤ quel Tokken nella tua sessione.",
        statusTokenValid: "Modalit√† Members attiva ¬∑ Tokken VIP valido.",
        statusTokenInvalid:
          "Tokken non valido o scaduto ¬∑ utilizzo della modalit√† demo. Generane uno nuovo su Members.",
        statusDemoEnded:
          "Demo terminata ¬∑ rinnova il tuo accesso per continuare con EsteborgCom7.",
        statusDemoActive:
          "Demo attiva ¬∑ se generi il tuo Tokken VIP su Members, lo user√≤ automaticamente.",
        statusListening: "Ascolto in corso... puoi parlare.",
        statusProcessingSpeech: "Elaboro ci√≤ che hai detto...",
        statusMicError:
          "Si √® verificato un problema con il microfono, riprova.",
        statusTextCaptured:
          "Testo catturato, puoi inviarlo o modificarlo.",
        statusTTSOn: "Voce Esteborg attivata.",
        statusTTSOff: "Voce Esteborg disattivata.",
        statusLangCurrent: "Lingua impostata su italiano.",
        tokenPasteReply:
          "Perfetto, ho il tuo Tokken Esteborg Members ‚úÖ\nOra dimmi: vuoi che lavoriamo sulle tue situazioni di comunicazione in spagnolo, inglese, portoghese, francese, italiano o tedesco?",
        tokenWelcomeMessage:
          "‚úÖ Il tuo Tokken Esteborg Members √® stato validato.\nSei in modalit√† Members VIP, quindi possiamo lavorare sulle tue situazioni reali di comunicazione con accesso completo.",
        welcomeMessage:
          "üëã Benvenuto in Esteborg IA ‚Äì Sprigiona tutto il tuo potere. Sono la tua guida ufficiale in questo programma di formazione in Intelligenza Artificiale.\n\nPrima di iniziare, ho bisogno del tuo Tokken Esteborg Members per convalidare il tuo accesso.\n\nSe non hai ancora un token, puoi ottenerlo o recuperarlo qui: https://membersvip.esteborg.live/#miembrosvip\n\nQuando avrai il tuo Tokken, incollalo qui o accedi dal tuo pannello Members VIP. Poi scegli la lingua in alto (ES, EN, PT, FR, IT, DE) e iniziamo il tuo training."
      },
      de: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Kommunikationstraining mit emotionaler Intelligenz",
        bannerDesc:
          "EsteborgCom7 ist dein Executive-Coach f√ºr Kommunikation. Hier arbeitest du an deinen Schl√ºsselsituationen mit einem praxisnahen Ansatz ‚Äì mit Guides, Lektionen und Challenges, damit dein Mindset zu deinem gr√∂√üten Vorteil wird.",
        panelTitle: "Mini-Training ¬∑ Kommunikation mit EsteborgCom7",
        chipsLabel: "Session starten:",
        btnLesson: "Lektion 1 starten",
        btnLessonText:
          "Ich m√∂chte Lektion 1 √ºber Kommunikation mit emotionaler Intelligenz starten.",
        btnEmotion: "Emotionale Intelligenz",
        btnEmotionText:
          "Ich m√∂chte an meiner emotionalen Intelligenz in einem wichtigen Gespr√§ch arbeiten.",
        btnChallenge: "Challenges starten",
        btnChallengeText:
          "Gib mir heute eine praktische Kommunikations-Challenge.",
        contentLabel: "Visueller Inhalt:",
        btnSlides: "Trainingsfolien anzeigen",
        btnSlidesText:
          "Ich m√∂chte die Trainingsfolien, um sie nach der Session noch einmal durchzugehen.",
        btnSummary: "Download-Zusammenfassung",
        btnSummaryText:
          "Gib mir eine herunterladbare Zusammenfassung mit den wichtigsten Punkten des heutigen Trainings.",
        inputPlaceholder:
          "Erz√§hl mir von einer realen Kommunikationssituation, die du verbessern m√∂chtest...",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Wenn du noch keinen Token hast, kannst du ihn hier erhalten oder wiederherstellen: https://membersvip.esteborg.live/#miembrosvip",
        chatName: "Esteborg",
        chatRole: "Kommunikationscoach",
        voiceToggleLabel: "Esteborg-Stimme aktiviert",
        voicePillLabel: "üéß Esteborg Stimme",
        sendButtonLabel: "SENDEN",
        statusInitialWithToken:
          "Ich habe einen Tokken in der URL oder lokal erkannt ¬∑ ich werde ihn automatisch in deiner Session verwenden.",
        statusInitialNoToken:
          "Demo aktiv ¬∑ wenn du deinen VIP-Tokken in Members erzeugst, nutze ich ihn automatisch.",
        statusTokenManual:
          "Tokken manuell eingef√ºgt ¬∑ ich werde diesen Tokken in deiner Session verwenden.",
        statusTokenValid: "Members-Modus aktiv ¬∑ VIP-Tokken g√ºltig.",
        statusTokenInvalid:
          "Tokken ung√ºltig oder abgelaufen ¬∑ Demo-Modus aktiv. Erzeuge einen neuen in Members.",
        statusDemoEnded:
          "Demo beendet ¬∑ erneuere deinen Zugang, um mit EsteborgCom7 fortzufahren.",
        statusDemoActive:
          "Demo aktiv ¬∑ wenn du deinen VIP-Tokken in Members erzeugst, nutze ich ihn automatisch.",
        statusListening: "Ich h√∂re zu... du kannst jetzt sprechen.",
        statusProcessingSpeech: "Ich verarbeite, was du gesagt hast...",
        statusMicError:
          "Es gab ein Problem mit dem Mikrofon, versuche es erneut.",
        statusTextCaptured:
          "Text erfasst, du kannst ihn senden oder bearbeiten.",
        statusTTSOn: "Esteborg-Stimme aktiviert.",
        statusTTSOff: "Esteborg-Stimme deaktiviert.",
        statusLangCurrent: "Sprache auf Deutsch gesetzt.",
        tokenPasteReply:
          "Perfekt, ich habe deinen Esteborg Members Tokken ‚úÖ\nSag mir nun: Willst du, dass wir an deinen Kommunikationssituationen auf Spanisch, Englisch, Portugiesisch, Franz√∂sisch, Italienisch oder Deutsch arbeiten?",
        tokenWelcomeMessage:
          "‚úÖ Dein Esteborg Members Tokken ist validiert.\nDu bist im Members-VIP-Modus, wir k√∂nnen also an deinen realen Kommunikationssituationen mit vollem Zugriff arbeiten.",
        welcomeMessage:
          "üëã Willkommen bei Esteborg IA ‚Äì Entfalte deine ganze Power. Ich bin dein offizieller Guide in diesem Trainingsprogramm f√ºr K√ºnstliche Intelligenz.\n\nBevor wir starten, brauche ich deinen Esteborg Members Tokken, um deinen Zugang zu best√§tigen.\n\nWenn du noch keinen Token hast, kannst du ihn hier erhalten oder wiederherstellen: https://membersvip.esteborg.live/#miembrosvip\n\nSobald du deinen Tokken hast, f√ºge ihn hier ein oder gehe √ºber dein Members-VIP-Panel. W√§hle dann oben die Sprache (ES, EN, PT, FR, IT, DE) und wir beginnen mit deinem Training."
      }
    };

    function t(key, langOverride) {
      const lang = langOverride || currentLang || "es";
      const pack = I18N[lang] || I18N.es;
      return pack[key] || I18N.es[key] || "";
    }

    // ========== TOKEN VIP ==========
    let VIP_TOKEN = null;
    const VIP_STORAGE_KEY = "esteborg_vip_token";

    function getVIPTokenFromURL() {
      const params = new URLSearchParams(window.location.search || "");
      const raw =
        params.get("tokken") ||
        params.get("access_token") ||
        params.get("token") ||
        "";
      const trimmed = (raw || "").trim();
      console.log(
        "[IA] Tokken detectado en URL:",
        trimmed ? trimmed.slice(0, 40) + "..." : "(ninguno)"
      );
      return trimmed || null;
    }

    function storeVIPToken(token) {
      try {
        if (!token) return;
        localStorage.setItem(VIP_STORAGE_KEY, token);
        console.log("[IA] Tokken guardado en localStorage");
      } catch (e) {
        console.warn("[IA] No pude guardar el Tokken en localStorage:", e);
      }
    }

    (function detectTokenEarly() {
      try {
        const stored = localStorage.getItem(VIP_STORAGE_KEY);
        if (stored && stored.trim()) {
          VIP_TOKEN = stored.trim();
          console.log("[IA] Tokken recuperado de localStorage");
        } else {
          VIP_TOKEN = getVIPTokenFromURL();
        }
      } catch (e) {
        console.warn("[IA] No pude leer localStorage:", e);
        VIP_TOKEN = getVIPTokenFromURL();
      }
    })();

    // ========== ELEMENTOS ==========
    const chatLog = document.getElementById("chat-log");
    const inputEl = document.getElementById("user-input");
    const sendBtn = document.getElementById("send-btn");
    const micBtn = document.getElementById("mic-btn");
    const ttsToggle = document.getElementById("tts-toggle");
    const statusLine = document.getElementById("status-line");
    const starterBtns = document.querySelectorAll(".starter");
    const contentBtns = document.querySelectorAll(".content");
    const langOptions = document.querySelectorAll(".lang-option");
    const voicePill = document.querySelector(".voice-pill");

    let history = [];
    let isSending = false;
    let recognition = null;
    let isRecording = false;
    let hasShownTokenWelcome = false;
    let currentAudio = null;
    let currentLang = "es";

    function $(id) {
      return document.getElementById(id);
    }

    function appendMessage(role, text) {
      if (!chatLog) return;
      const wrapper = document.createElement("div");
      wrapper.className = "message " + (role === "user" ? "user" : "assistant");

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = text;

      wrapper.appendChild(bubble);
      chatLog.appendChild(wrapper);

      chatLog.scrollTop = chatLog.scrollHeight;
    }

    function setStatus(msg) {
      if (!statusLine) return;
      const spans = statusLine.querySelectorAll("span");
      if (spans.length > 1) {
        spans[1].textContent = msg;
      }
    }

    function applyUILanguage(lang) {
      const pack = I18N[lang] || I18N.es;

      if ($("i-banner-main")) $("i-banner-main").textContent = pack.bannerMain;
      if ($("i-banner-sub")) $("i-banner-sub").textContent = pack.bannerSub;
      if ($("i-banner-desc")) $("i-banner-desc").textContent = pack.bannerDesc;

      if ($("i-panel-title")) $("i-panel-title").textContent = pack.panelTitle;
      if ($("i-chips-label")) $("i-chips-label").textContent = pack.chipsLabel;

      if ($("i-btn-lesson")) {
        $("i-btn-lesson").textContent = pack.btnLesson;
        $("i-btn-lesson").setAttribute("data-text", pack.btnLessonText);
      }
      if ($("i-btn-emotion")) {
        $("i-btn-emotion").textContent = pack.btnEmotion;
        $("i-btn-emotion").setAttribute("data-text", pack.btnEmotionText);
      }
      if ($("i-btn-challenge")) {
        $("i-btn-challenge").textContent = pack.btnChallenge;
        $("i-btn-challenge").setAttribute("data-text", pack.btnChallengeText);
      }

      if ($("i-content-label"))
        $("i-content-label").textContent = pack.contentLabel;
      if ($("i-btn-slides")) {
        $("i-btn-slides").textContent = pack.btnSlides;
        $("i-btn-slides").setAttribute("data-text", pack.btnSlidesText);
      }
      if ($("i-btn-summary")) {
        $("i-btn-summary").textContent = pack.btnSummary;
        $("i-btn-summary").setAttribute("data-text", pack.btnSummaryText);
      }

      if (inputEl) inputEl.placeholder = pack.inputPlaceholder;

      if ($("i-footer-token-title"))
        $("i-footer-token-title").textContent = pack.footerTokenTitle;
      if ($("i-footer-token-text"))
        $("i-footer-token-text").textContent = pack.footerTokenText;

      if ($("i-chat-name")) $("i-chat-name").textContent = pack.chatName;
      if ($("i-chat-role")) $("i-chat-role").textContent = pack.chatRole;

      if ($("i-voice-toggle-label"))
        $("i-voice-toggle-label").textContent = pack.voiceToggleLabel;
      if ($("i-voice-pill"))
        $("i-voice-pill").textContent = pack.voicePillLabel;

      if (sendBtn) sendBtn.textContent = pack.sendButtonLabel;
    }

    function getSpeechLangCode(lang) {
      switch (lang) {
        case "en": return "en-US";
        case "pt": return "pt-BR";
        case "fr": return "fr-FR";
        case "it": return "it-IT";
        case "de": return "de-DE";
        default: return "es-MX";
      }
    }

    function pushHiddenInstruction(text) {
      history.push({ role: "system", content: text });
    }

    function stopTTS() {
      if (currentAudio) {
        try {
          currentAudio.pause();
          currentAudio.currentTime = 0;
        } catch (_) {}
      }
    }

    async function playTTS(text) {
      if (!ttsToggle || !ttsToggle.checked) return;
      if (!text) return;

      try {
        const trimmed = text.length > 450 ? text.slice(0, 450) : text;

        const res = await fetch(TTS_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            text: trimmed,
            voiceId: "IdhxxSTaAg80CTeSgScm"
          })
        });

        if (!res.ok) {
          console.error("[TTS] API error", await res.text());
          return;
        }

        const blob = await res.blob();
        const url = URL.createObjectURL(blob);

        stopTTS();
        currentAudio = new Audio(url);
        currentAudio.play().catch((err) => {
          console.warn("[TTS] No se pudo reproducir:", err);
        });
      } catch (e) {
        console.error("[TTS] Error general TTS:", e);
      }
    }

    function startSessionForCurrentLang(updateStatus) {
      if (typeof updateStatus === "undefined") updateStatus = true;
      if (!chatLog) return;

      chatLog.innerHTML = "";
      history = [];
      stopTTS();

      const welcome = t("welcomeMessage");
      appendMessage("assistant", welcome);
      playTTS(welcome);

      if (updateStatus) {
        if (VIP_TOKEN) {
          setStatus(t("statusInitialWithToken"));
        } else {
          setStatus(t("statusInitialNoToken"));
        }
      }
    }

    async function sendMessage(optionalText) {
      let text = (optionalText || inputEl.value || "").trim();
      if (!text) return;
      if (isSending) return;

      appendMessage("user", text);
      history.push({ role: "user", content: text });
      inputEl.value = "";
      isSending = true;

      const tokenToSend = VIP_TOKEN || null;

      try {
        setStatus("Conectando con Esteborg...");
        const resp = await fetch(API_BASE + MODULE_PATH, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            message: text,
            rawToken: tokenToSend,
            userName: null,
            history,
            lang: currentLang,
          }),
        });

        console.log("[IA] Respuesta HTTP:", resp.status);

        if (!resp.ok) throw new Error("HTTP " + resp.status);

        const data = await resp.json();
        console.log("[IA] Payload backend:", data);

        const reply =
          data.reply ||
          "No tengo una respuesta en este momento, intenta de nuevo.";

        appendMessage("assistant", reply);
        history.push({ role: "assistant", content: reply });

        if (data.tokenStatus === "valid") {
          setStatus(t("statusTokenValid"));

          if (!hasShownTokenWelcome) {
            const tokenMsg = t("tokenWelcomeMessage");
            appendMessage("assistant", tokenMsg);
            history.push({ role: "assistant", content: tokenMsg });
            hasShownTokenWelcome = true;
          }
        } else if (data.tokenStatus === "invalid") {
          setStatus(t("statusTokenInvalid"));
        } else if (data.demoStatus === "ended") {
          setStatus(t("statusDemoEnded"));
        } else {
          setStatus(t("statusDemoActive"));
        }

        if (ttsToggle && ttsToggle.checked) {
          playTTS(reply);
        }
      } catch (err) {
        console.error("[IA] Error al enviar mensaje:", err);
        appendMessage(
          "assistant",
          "Hubo un problema al conectar con Esteborg. Intenta de nuevo en unos segundos."
        );
      } finally {
        isSending = false;
      }
    }

    function initSpeechRecognition() {
      const SpeechRecognition =
        window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        if (micBtn) micBtn.style.display = "none";
        return;
      }

      recognition = new SpeechRecognition();
      recognition.lang = getSpeechLangCode(currentLang);
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.onstart = () => {
        setStatus(t("statusListening"));
        isRecording = true;
      };

      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        if (inputEl) inputEl.value = transcript || "";
        setStatus(t("statusTextCaptured"));
      };

      recognition.onerror = () => {
        setStatus(t("statusMicError"));
        isRecording = false;
      };

      recognition.onend = () => {
        if (!isRecording) return;
        isRecording = false;
        setStatus(t("statusDemoActive"));
      };
    }

    function toggleMic() {
      if (!recognition) return;
      try {
        if (!isRecording) {
          recognition.lang = getSpeechLangCode(currentLang);
          recognition.start();
        } else {
          recognition.stop();
        }
      } catch (_) {}
    }

    (function init() {
      applyUILanguage(currentLang);
      startSessionForCurrentLang(true);

      if (VIP_TOKEN) {
        setStatus(t("statusInitialWithToken"));
      } else {
        setStatus(t("statusInitialNoToken"));
      }

      if (inputEl && sendBtn) {
        sendBtn.addEventListener("click", () => sendMessage());
        inputEl.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
          }
        });
      }

      if (micBtn) micBtn.addEventListener("click", toggleMic);
      initSpeechRecognition();

      starterBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          const text = btn.getAttribute("data-text") || btn.textContent;
          sendMessage(text);
        });
      });

      contentBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          const text = btn.getAttribute("data-text") || btn.textContent;
          sendMessage(text);
        });
      });

      langOptions.forEach((opt) => {
        opt.addEventListener("click", () => {
          langOptions.forEach((o) => o.classList.remove("active"));
          opt.classList.add("active");

          const code = opt.getAttribute("data-lang") || "es";
          currentLang = code;

          applyUILanguage(currentLang);
          startSessionForCurrentLang(false);

          if (code === "en") {
            pushHiddenInstruction(
              "From this point on, please answer ALWAYS in ENGLISH, even if my messages are in other languages."
            );
          } else if (code === "pt") {
            pushHiddenInstruction(
              "A partir de agora, responda sempre em PORTUGU√äS do Brasil, mesmo que eu escreva em outro idioma."
            );
          } else if (code === "fr") {
            pushHiddenInstruction(
              "√Ä partir de maintenant, r√©ponds toujours en FRAN√áAIS, m√™me si j‚Äô√©cris dans une autre langue."
            );
          } else if (code === "it") {
            pushHiddenInstruction(
              "Da questo momento in poi, rispondi sempre in ITALIANO, anche se scrivo in un‚Äôaltra lingua."
            );
          } else if (code === "de") {
            pushHiddenInstruction(
              "Ab jetzt bitte IMMER auf DEUTSCH antworten, auch wenn ich in einer anderen Sprache schreibe."
            );
          } else {
            pushHiddenInstruction(
              "A partir de este punto, responde siempre en ESPA√ëOL latino, incluso si escribo algo en otro idioma."
            );
          }

          setStatus(t("statusLangCurrent"));

          if (recognition) {
            recognition.lang = getSpeechLangCode(currentLang);
          }
        });
      });

      if (ttsToggle) {
        ttsToggle.addEventListener("change", () => {
          if (!ttsToggle.checked) {
            stopTTS();
            setStatus(t("statusTTSOff"));
          } else {
            setStatus(t("statusTTSOn"));
          }
        });
      }

      function sendResize() {
        try {
          const height =
            document.documentElement.scrollHeight ||
            document.body.scrollHeight ||
            0;

          parent.postMessage(
            {
              type: "ESTEBORG_IFRAME_RESIZE",
              height,
            },
            "*"
          );
        } catch (e) {
          console.warn("[IA] No pude enviar resize:", e);
        }
      }

      sendResize();
      window.addEventListener("resize", () => {
        clearTimeout(window.__esteborgResizeTimer);
        window.__esteborgResizeTimer = setTimeout(sendResize, 80);
      });

      const observer = new MutationObserver(function () {
        clearTimeout(window.__esteborgResizeTimer);
        window.__esteborgResizeTimer = setTimeout(sendResize, 80);
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true,
        attributes: true,
      });
    })();
  </script>
</body>
</html>
