<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
  />
  <title>Esteborg IA ¬∑ Entrenamiento ejecutivo en IA aplicada</title>
  <style>
    :root {
      color-scheme: dark;
      --bg-main: radial-gradient(circle at top left, #020617 0%, #020617 30%, #020817 80%, #020617 100%);
      --card-bg: radial-gradient(circle at top left, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      --accent: #6366f1;
      --accent-soft: rgba(129, 140, 248, 0.22);
      --accent-strong: rgba(129, 140, 248, 0.4);
      --accent-glow: rgba(59, 130, 246, 0.75);
      --accent-emerald: #22c55e;
      --accent-emerald-soft: rgba(34, 197, 94, 0.16);
      --accent-amber: #fbbf24;
      --accent-rose: #fb7185;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.35);
      --shadow-soft: 0 22px 60px rgba(15, 23, 42, 0.88);
      --radius-lg: 28px;
      --radius-pill: 999px;
      --glass-border: 1px solid rgba(148, 163, 184, 0.35);
      --glow-ring: 0 0 0 1px rgba(129, 140, 248, 0.5), 0 0 35px rgba(79, 70, 229, 0.5);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "SF Pro Display", -system-ui, sans-serif;
      background: radial-gradient(circle at top, #020617 0%, #000014 40%, #020617 100%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    #app {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 24px 12px 32px;
      background:
        radial-gradient(circle at top left, rgba(94, 234, 212, 0.08), transparent 55%),
        radial-gradient(circle at top right, rgba(129, 140, 248, 0.16), transparent 55%),
        radial-gradient(circle at bottom, rgba(15, 23, 42, 1), #020617 70%);
    }

    @media (min-width: 768px) {
      #app {
        padding: 32px 16px 40px;
      }
    }

    @media (min-width: 1024px) {
      #app {
        padding: 40px;
      }
    }

    .shell {
      width: 100%;
      max-width: 1040px;
      margin: 0 auto;
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.99));
      border-radius: 34px;
      border: 1px solid rgba(148, 163, 184, 0.42);
      box-shadow:
        0 24px 80px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(30, 64, 175, 0.7);
      padding: 18px 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      position: relative;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      .shell {
        padding: 22px 20px 22px;
        gap: 18px;
      }
    }

    @media (min-width: 1024px) {
      .shell {
        padding: 24px 22px 24px;
        gap: 20px;
      }
    }

    .shell::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at top left, rgba(59, 130, 246, 0.16), transparent 60%),
        radial-gradient(circle at center right, rgba(8, 47, 73, 0.42), transparent 55%),
        radial-gradient(circle at bottom left, rgba(79, 70, 229, 0.10), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
      z-index: -1;
    }

    .shell-inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    @media (min-width: 768px) {
      .shell-inner {
        gap: 20px;
      }
    }

    .banner {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 12px 12px 10px;
      border-radius: 24px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.95), rgba(2, 6, 23, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.45);
      box-shadow:
        0 14px 40px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(56, 189, 248, 0.3);
    }

    @media (min-width: 640px) {
      .banner {
        padding: 14px 16px;
      }
    }

    @media (min-width: 768px) {
      .banner {
        padding: 16px 18px 14px;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      }
    }

    .banner-header {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .badge-row {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .badge-main {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(129, 140, 248, 0.7);
      background: radial-gradient(circle at top left, rgba(30, 64, 175, 0.9), rgba(15, 23, 42, 1));
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #e5e7eb;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.5);
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.28), 0 0 24px rgba(34, 197, 94, 0.7);
    }

    .badge-main span:last-child {
      opacity: 0.9;
    }

    .banner-title {
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.03em;
      color: #f9fafb;
    }

    @media (min-width: 768px) {
      .banner-title {
        font-size: 18px;
      }
    }

    .banner-sub {
      font-size: 13px;
      color: #cbd5f5;
    }

    .banner-desc {
      margin-top: 6px;
      font-size: 12px;
      color: #9ca3af;
      max-width: 640px;
      line-height: 1.4;
    }

    @media (min-width: 768px) {
      .banner-desc {
        font-size: 12.5px;
      }
    }

    .banner-side {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-start;
      margin-top: 10px;
    }

    @media (min-width: 768px) {
      .banner-side {
        margin-top: 0;
        align-items: flex-end;
        text-align: right;
      }
    }

    .tag-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, rgba(8, 47, 73, 0.9), rgba(15, 23, 42, 1));
      border: 1px solid rgba(45, 212, 191, 0.6);
      font-size: 11px;
      color: #a5f3fc;
      box-shadow: 0 0 0 1px rgba(8, 47, 73, 0.8);
    }

    .tag-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #22c55e, #16a34a);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.35), 0 0 16px rgba(22, 163, 74, 0.9);
    }

    .tag-pill span:last-child {
      opacity: 0.92;
    }

    .tag-sub {
      font-size: 11px;
      color: #9ca3af;
      max-width: 220px;
    }

    .pill-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid rgba(129, 140, 248, 0.7);
      background:
        radial-gradient(circle at top left, rgba(129, 140, 248, 0.2), rgba(30, 64, 175, 0.95));
      color: #e5e7eb;
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      cursor: default;
      box-shadow:
        0 0 0 1px rgba(79, 70, 229, 0.6),
        0 12px 30px rgba(15, 23, 42, 0.9);
    }

    .pill-btn span:last-child {
      opacity: 0.95;
    }

    .pill-icon {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #38bdf8, #1d4ed8);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.7);
    }

    .pill-icon-inner {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #e0f2fe;
    }

    .panel {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 14px 12px 12px;
      border-radius: 22px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      border: 1px solid rgba(148, 163, 184, 0.45);
      box-shadow:
        0 18px 60px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(30, 64, 175, 0.85);
    }

    @media (min-width: 768px) {
      .panel {
        padding: 14px 14px 12px;
      }
    }

    .panel-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 4px;
    }

    .panel-title {
      font-size: 13px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #9ca3af;
    }
    .panel-title span {
      color: #e5e7eb;
    }

    .pill-members {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, rgba(22, 101, 52, 0.9), rgba(6, 78, 59, 1));
      border: 1px solid rgba(34, 197, 94, 0.8);
      color: #bbf7d0;
      font-size: 11px;
      box-shadow:
        0 0 0 1px rgba(21, 128, 61, 0.8),
        0 10px 30px rgba(6, 95, 70, 0.8);
    }

    .pill-members-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #bbf7d0, #22c55e);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.35);
    }

    .pill-members span:last-child {
      opacity: 0.96;
    }

    .chips-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    @media (min-width: 640px) {
      .chips-row {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
    }

    .chips-label {
      font-size: 12px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.09em;
    }

    .chips-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip-btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background:
        radial-gradient(circle at top left, rgba(148, 163, 184, 0.16), rgba(30, 64, 175, 0.9));
      color: #e5e7eb;
      font-size: 11px;
      cursor: pointer;
      transition:
        background 0.15s ease,
        box-shadow 0.15s ease,
        transform 0.12s ease,
        border-color 0.15s ease;
      box-shadow:
        0 10px 30px rgba(15, 23, 42, 0.85),
        0 0 0 1px rgba(30, 64, 175, 0.7);
      white-space: nowrap;
    }

    .chip-btn:hover {
      transform: translateY(-1px);
      box-shadow:
        0 14px 40px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(59, 130, 246, 0.9);
      border-color: rgba(129, 140, 248, 0.9);
    }

    .chip-btn:active {
      transform: translateY(0);
      box-shadow:
        0 6px 20px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(30, 64, 175, 0.8);
    }

    .chip-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #f97316, #facc15);
      box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.45);
    }

    .chip-label {
      font-weight: 500;
    }

    .chip-kicker {
      font-size: 10px;
      opacity: 0.76;
    }

    .chip-btn.primary {
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.18), rgba(37, 99, 235, 0.95));
      border-color: rgba(96, 165, 250, 0.9);
      box-shadow:
        0 14px 42px rgba(30, 64, 175, 0.95),
        0 0 0 1px rgba(37, 99, 235, 0.9);
    }

    .chip-btn.primary .chip-dot {
      background: radial-gradient(circle at top left, #22c55e, #16a34a);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.4);
    }

    .chip-btn.secondary {
      background:
        radial-gradient(circle at top left, rgba(129, 140, 248, 0.16), rgba(30, 64, 175, 0.95));
    }

    .chip-btn.tertiary {
      background:
        radial-gradient(circle at top left, rgba(236, 72, 153, 0.18), rgba(88, 28, 135, 0.96));
      border-color: rgba(244, 114, 182, 0.9);
      box-shadow:
        0 12px 36px rgba(88, 28, 135, 0.95),
        0 0 0 1px rgba(219, 39, 119, 0.85);
    }

    .subchips-row {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    @media (min-width: 640px) {
      .subchips-row {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
    }

    .subchips-label {
      font-size: 11px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.09em;
    }

    .subchips-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .subchip-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 11px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(2, 6, 23, 1));
      color: #e5e7eb;
      font-size: 11px;
      cursor: pointer;
      transition:
        background 0.15s ease,
        border-color 0.15s ease,
        transform 0.1s ease,
        box-shadow 0.15s ease;
      box-shadow: 0 10px 28px rgba(15, 23, 42, 0.9);
      white-space: nowrap;
    }

    .subchip-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(129, 140, 248, 0.9);
      box-shadow:
        0 16px 36px rgba(15, 23, 42, 0.96),
        0 0 0 1px rgba(59, 130, 246, 0.8);
    }

    .subchip-btn:active {
      transform: translateY(0);
      box-shadow:
        0 8px 20px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(30, 64, 175, 0.8);
    }

    .subchip-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #38bdf8, #1d4ed8);
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.4);
    }

    .subchip-label {
      font-size: 11px;
    }

    .subchip-kicker {
      font-size: 10px;
      opacity: 0.8;
    }

    .chat-card {
      margin-top: 4px;
      border-radius: 22px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(2, 6, 23, 1));
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow:
        0 18px 60px rgba(15, 23, 42, 0.96),
        0 0 0 1px rgba(37, 99, 235, 0.85);
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    @media (min-width: 768px) {
      .chat-card {
        padding: 12px;
      }
    }

    .chat-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding-bottom: 6px;
      border-bottom: 1px solid rgba(55, 65, 81, 0.7);
    }

    .chat-id {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .chat-avatar-circle {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #1d4ed8, #0f766e);
      border: 2px solid rgba(59, 130, 246, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 0 0 2px rgba(15, 23, 42, 1),
        0 0 30px rgba(129, 140, 248, 0.7);
    }

    .chat-avatar-letter {
      font-size: 16px;
      font-weight: 700;
      color: #e5e7eb;
    }

    .chat-meta {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .chat-meta-name {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #cbd5f5;
    }

    .chat-meta-role {
      font-size: 11px;
      color: #9ca3af;
    }

    .chat-language-pill {
  display: inline-flex;
  align-items: center;
  flex-wrap: wrap;           /* si no caben, saltan a segunda l√≠nea en m√≥vil */
  gap: 4px;
  border-radius: 999px;
  padding: 3px 7px;
  border: 1px solid rgba(248, 250, 252, 0.3);
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.9));
  font-size: 11px;
  color: rgba(229, 231, 235, 0.98);
}

.lang-option {
  padding: 1px 6px;
  border-radius: 999px;
  border: 1px solid rgba(55, 65, 81, 0.9);
  font-size: 10px;
  text-transform: uppercase;
  cursor: pointer;
  color: #9ca3af;
  background: transparent;
}

    .lang-option.active {
      background: radial-gradient(circle at top left, rgba(59, 130, 246, 1), rgba(37, 99, 235, 1));
      color: #f9fafb;
      box-shadow:
        0 0 0 1px rgba(191, 219, 254, 0.9),
        0 0 20px rgba(37, 99, 235, 0.9);
      transform: translateY(-0.5px);
    }

    .chat-log {
      margin-top: 6px;
      border-radius: 16px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      border: 1px solid rgba(55, 65, 81, 0.85);
      padding: 10px;
      max-height: 360px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      scroll-behavior: smooth;
    }

    @media (min-width: 768px) {
      .chat-log {
        padding: 10px 12px;
        max-height: 420px;
      }
    }

    .message {
      display: flex;
      gap: 8px;
      font-size: 12px;
      line-height: 1.45;
    }

    .message.assistant {
      justify-content: flex-start;
    }

    .message.user {
      justify-content: flex-end;
    }

    .message .bubble {
      max-width: 92%;
      padding: 7px 9px;
      border-radius: 16px;
      border: 1px solid rgba(55, 65, 81, 0.88);
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      color: #e5e7eb;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.9);
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .message.user .bubble {
      background:
        radial-gradient(circle at top left, rgba(129, 140, 248, 0.32), rgba(30, 64, 175, 0.96));
      border-color: rgba(129, 140, 248, 0.9);
      box-shadow:
        0 14px 32px rgba(30, 64, 175, 0.96),
        0 0 0 1px rgba(129, 140, 248, 0.9);
    }

    .input-row {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    @media (min-width: 640px) {
      .input-row {
        flex-direction: row;
        align-items: flex-end;
      }
    }

    .input-wrapper {
      flex: 1;
      position: relative;
    }

    .input-wrapper textarea {
      width: 100%;
      min-height: 54px;
      max-height: 120px;
      resize: vertical;
      padding: 10px 12px 28px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      color: #e5e7eb;
      font-size: 13px;
      line-height: 1.4;
      outline: none;
      box-shadow:
        0 14px 40px rgba(15, 23, 42, 0.96),
        0 0 0 1px rgba(30, 64, 175, 0.9);
    }

    .input-wrapper textarea::placeholder {
      color: #6b7280;
    }

    .input-meta {
      position: absolute;
      left: 12px;
      bottom: 7px;
      font-size: 10px;
      color: #6b7280;
    }

    .input-actions {
      display: flex;
      gap: 8px;
      align-items: center;
      justify-content: flex-end;
      margin-top: 4px;
    }

    .mic-btn,
    .send-btn {
      width: 46px;
      height: 46px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition:
        transform 0.12s ease,
        box-shadow 0.15s ease,
        background 0.15s ease,
        opacity 0.15s ease;
    }

    .mic-btn {
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.25), rgba(37, 99, 235, 0.96));
      box-shadow:
        0 14px 40px rgba(30, 64, 175, 0.96),
        0 0 0 1px rgba(56, 189, 248, 0.8);
    }

    .send-btn {
      flex: 1;
      max-width: 150px;
      background:
        radial-gradient(circle at top left, rgba(251, 191, 36, 0.14), rgba(245, 158, 11, 0.96));
      box-shadow:
        0 16px 40px rgba(180, 83, 9, 0.96),
        0 0 0 1px rgba(245, 158, 11, 0.9);
      color: #111827;
      font-weight: 600;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .mic-btn:hover,
    .send-btn:hover {
      transform: translateY(-1px);
      box-shadow:
        0 18px 46px rgba(15, 23, 42, 0.98),
        0 0 0 1px rgba(129, 140, 248, 0.9);
    }

    .mic-btn:active,
    .send-btn:active {
      transform: translateY(0);
      box-shadow:
        0 10px 26px rgba(15, 23, 42, 0.96),
        0 0 0 1px rgba(37, 99, 235, 0.85);
    }

    .mic-icon,
    .send-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top left, #e5e7eb, #f9fafb);
      color: #111827;
      font-size: 12px;
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .mic-btn.listening {
      background:
        radial-gradient(circle at top left, rgba(244, 63, 94, 0.22), rgba(220, 38, 38, 0.96));
      box-shadow:
        0 0 0 1px rgba(239, 68, 68, 0.8),
        0 20px 40px rgba(127, 29, 29, 0.95);
    }

    .status-row {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 11px;
      color: #9ca3af;
    }

    @media (min-width: 640px) {
      .status-row {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
    }

    .status-main {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #22c55e, #16a34a);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.35);
    }

    .status-text {
      color: #e5e7eb;
    }

    .tts-toggle-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tts-toggle-label {
      font-size: 11px;
      color: #9ca3af;
    }

    .tts-toggle-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 9px;
      border-radius: 999px;
      background:
        radial-gradient(circle at top left, rgba(37, 99, 235, 0.65), rgba(15, 23, 42, 1));
      border: 1px solid rgba(129, 140, 248, 0.8);
      color: #e5e7eb;
      font-size: 11px;
      cursor: pointer;
      box-shadow:
        0 12px 30px rgba(15, 23, 42, 0.96),
        0 0 0 1px rgba(59, 130, 246, 0.85);
    }

    .tts-toggle-pill.off {
      background:
        radial-gradient(circle at top left, rgba(31, 41, 55, 0.98), rgba(15, 23, 42, 1));
      border-color: rgba(75, 85, 99, 0.9);
      color: #9ca3af;
      box-shadow:
        0 10px 26px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(55, 65, 81, 0.9);
    }

    .tts-toggle-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #22c55e, #16a34a);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.4);
    }

    .tts-toggle-pill.off .tts-toggle-pill-dot {
      background: radial-gradient(circle at top left, #9ca3af, #6b7280);
      box-shadow: 0 0 0 3px rgba(75, 85, 99, 0.5);
    }

    .footer {
      margin-top: 8px;
      padding: 10px 12px 6px;
      border-radius: 20px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      border: 1px solid rgba(55, 65, 81, 0.9);
      box-shadow:
        0 16px 46px rgba(15, 23, 42, 0.98),
        0 0 0 1px rgba(37, 99, 235, 0.85);
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 10.5px;
      color: #9ca3af;
    }

    .footer-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    @media (min-width: 640px) {
      .footer-row {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
    }

    .footer-token-title {
      font-weight: 600;
      color: #e5e7eb;
    }

    .footer-token-text a {
      color: #a5b4fc;
      text-decoration: none;
    }

    .footer-token-text a:hover {
      text-decoration: underline;
    }

    .footer-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 10px;
      color: #6b7280;
    }

    .footer-meta span {
      opacity: 0.9;
    }

    .footer-meta a {
      color: #9ca3af;
      text-decoration: none;
    }

    .footer-meta a:hover {
      text-decoration: underline;
    }

    /* === Ajuste selector de idiomas ERPev para celular === */
@media (max-width: 768px) {
  .lang-selector {
    display: flex;
    flex-wrap: wrap;        /* que los botones se bajen a otra fila */
    gap: 6px;
    justify-content: flex-start;
  }

  .lang-selector .lang-option {
    flex: 1 1 30%;          /* 2‚Äì3 botones por fila, como Com7 */
    max-width: 90px;
    padding: 4px 8px;
    font-size: 11px;        /* un pel√≠n m√°s compacto en m√≥vil */
    text-align: center;
  }
}
    
  </style>
</head>
<body>
  <div id="app">
    <div class="shell">
      <div class="shell-inner">
        <div class="banner">
          <div class="banner-header">
            <div class="badge-row">
              <div class="badge-main">
                <span class="badge-dot"></span>
                <span id="i-banner-main">ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP</span>
              </div>
            </div>
            <div class="banner-title" id="i-banner-sub">
              Programa ejecutivo ¬∑ Coach profesional de Inteligencia Artificial
            </div>
            <div class="banner-sub" id="i-banner-desc">
              Esteborg IA ‚Äì Despliega todo tu poder es tu programa ejecutivo para usar la
              Inteligencia Artificial como ventaja real en tu trabajo, negocio y vida.
            </div>
          </div>
          <div class="banner-side">
            <div class="tag-pill">
              <span class="tag-dot"></span>
              <span>Acceso exclusivo ¬∑ Tokken Esteborg Members</span>
            </div>
            <div class="tag-sub">
              Tu sesi√≥n se adapta seg√∫n tu objetivo: aprender IA desde cero, aplicar IA en tu trabajo y automatizar tareas.
            </div>
            <div class="pill-btn">
              <div class="pill-icon">
                <div class="pill-icon-inner"></div>
              </div>
              <span>Programa Esteborg IA ‚Äì Despliega todo tu poder</span>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span id="i-panel-title">Mini entrenamiento ¬∑ Esteborg IA ‚Äì Despliega todo tu poder</span>
            </div>
            <div class="pill-members">
              <span class="pill-members-dot"></span>
              <span>MEMBERS VIP</span>
            </div>
          </div>

          <div class="chips-row">
            <div class="chips-label" id="i-chips-label">
              Comenzar entrenamiento:
            </div>
            <div class="chips-group">
              <button class="chip-btn primary" id="i-btn-lesson">
                <span class="chip-dot"></span>
                <span class="chip-label">Aprender IA desde cero</span>
                <span class="chip-kicker">M√≥dulo 1 ¬∑ Fundamentos</span>
              </button>
              <button class="chip-btn secondary" id="i-btn-emotion">
                <span class="chip-dot"></span>
                <span class="chip-label">Aplicar IA en mi trabajo</span>
                <span class="chip-kicker">Casos reales y flujos</span>
              </button>
              <button class="chip-btn tertiary" id="i-btn-challenge">
                <span class="chip-dot"></span>
                <span class="chip-label">Dominar ChatGPT y otras IA</span>
                <span class="chip-kicker">Retos pr√°cticos</span>
              </button>
            </div>
          </div>

          <div class="subchips-row">
            <div class="subchips-label" id="i-content-label">
              Herramientas del programa:
            </div>
            <div class="subchips-group">
              <button class="subchip-btn" id="i-btn-slides">
                <span class="subchip-dot"></span>
                <span class="subchip-label">Estructura del programa</span>
                <span class="subchip-kicker">M√≥dulos y ruta</span>
              </button>
              <button class="subchip-btn" id="i-btn-summary">
                <span class="subchip-dot"></span>
                <span class="subchip-label">Automatizar tareas con IA</span>
                <span class="subchip-kicker">Ideas y ejemplos</span>
              </button>
            </div>
          </div>

          <div class="chat-card">
            <div class="chat-header">
              <div class="chat-id">
                <div class="chat-avatar-circle">
                  <div class="chat-avatar-letter">E</div>
                </div>
                <div class="chat-meta">
                 <div class="chat-meta-name" id="i-chat-name">Esteborg</div>
<div class="chat-meta-role" id="i-chat-role">
  COACH PROFESIONAL DE INTELIGENCIA ARTIFICIAL
</div>
</div>
</div>
<div class="chat-language-pill">
  <span class="lang-option active" data-lang="es">ES</span>
  <span class="lang-option" data-lang="en">EN</span>
  <span class="lang-option" data-lang="pt">PT</span>
  <span class="lang-option" data-lang="fr">FR</span>
  <span class="lang-option" data-lang="it">IT</span>
  <span class="lang-option" data-lang="de">DE</span>
</div>
            </div>

            <div class="chat-log" id="chat-log"></div>

            <div class="input-row">
              <div class="input-wrapper">
                <textarea
                  id="user-input"
                  placeholder="Cu√©ntame qu√© quieres lograr con la Inteligencia Artificial en tu trabajo, negocio o proyectos..."
                ></textarea>
                <div class="input-meta">
                  Tu entrenador Esteborg IA adaptar√° el entrenamiento seg√∫n tu objetivo.
                </div>
              </div>
              <div class="input-actions">
                <button class="mic-btn" id="mic-btn">
                  <div class="mic-icon">üéôÔ∏è</div>
                </button>
                <button class="send-btn" id="send-btn">
                  <span>ENVIAR</span>
                </button>
              </div>
            </div>

            <div class="status-row">
              <div class="status-main">
                <div class="status-dot"></div>
                <div class="status-text" id="status-line">
                  Preparando tu entrenamiento con Esteborg IA...
                </div>
              </div>
              <div class="tts-toggle-row">
                <div class="tts-toggle-label" id="i-voice-toggle-label">
                  Voz Esteborg activada
                </div>
                <div class="tts-toggle-pill" id="tts-toggle">
                  <div class="tts-toggle-pill-dot"></div>
                  <span id="i-voice-pill">Voz Esteborg</span>
                </div>
              </div>
            </div>
          </div>

          <div class="footer">
            <div class="footer-row">
              <div class="footer-token">
                <div class="footer-token-title" id="i-footer-token-title">
                  Tokken Esteborg Members
                </div>
                <div class="footer-token-text" id="i-footer-token-text">
                  Si a√∫n no tienes token, puedes obtenerlo o recuperarlo en:
                  <a href="https://membersvip.esteborg.live/#miembrosvip" target="_blank"
                    >https://membersvip.esteborg.live/#miembrosvip</a
                  >
                </div>
              </div>
              <div class="footer-meta">
                <span>Propiedad de Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg</span>
                <span>¬∑</span>
                <a href="https://esteborg.com" target="_blank">esteborg.com</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // ========== CONFIG ==========
    const API_BASE = "https://esteborg88full-backend-modular.onrender.com";
    const TTS_URL = API_BASE + "/api/voice";

    // ========== I18N (clonado de COM7, adaptado a IA en ES) ==========
    const I18N = {
      es: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Programa ejecutivo ¬∑ Coach profesional de Inteligencia Artificial",
        bannerDesc:
          "Esteborg IA ‚Äì Despliega todo tu poder es tu programa ...ra usar la IA como ventaja real en tu trabajo, negocio y vida.",
        panelTitle: "Mini entrenamiento ¬∑ Esteborg IA ‚Äì Despliega todo tu poder",
        chipsLabel: "Comenzar entrenamiento:",
        btnLesson: "Aprender IA desde cero",
        btnLessonText:
          "Quiero aprender Inteligencia Artificial desde cero y empezar por el M√≥dulo 1: Fundamentos de la IA.",
        btnEmotion: "Aplicar IA en mi trabajo",
        btnEmotionText:
          "Quiero aplicar la IA en mi trabajo o negocio y dise√±ar contigo un plan pr√°ctico con tareas concretas.",
        btnChallenge: "Dominar ChatGPT y otras IA",
        btnChallengeText:
          "Quiero retos pr√°cticos para dominar ChatGPT y otras IA en los pr√≥ximos 90 d√≠as.",
        contentLabel: "Herramientas del programa:",
        btnSlides: "Estructura del programa",
        btnSlidesText:
          "Mu√©strame la estructura completa del programa Esteborg IA ‚Äì Despliega todo tu poder.",
        btnSummary: "Automatizar tareas con IA",
        btnSummaryText:
          "Quiero que me ayudes a automatizar tareas con IA usando herramientas no-code, agentes y flujos inteligentes para mi trabajo diario.",
        chatName: "Esteborg",
        chatRole: "COACH PROFESIONAL DE INTELIGENCIA ARTIFICIAL",
        inputPlaceholder:
          "Cu√©ntame qu√© quieres lograr con la Inteligencia Artificial en tu trabajo, negocio o proyectos...",
        inputMeta:
          "Tu coach Esteborg IA adaptar√° el entrenamiento a tus metas.",
        statusInitial: "Preparando tu entrenamiento con Esteborg IA...",
        statusTokenValid:
          "Tu Tokken Esteborg Members ya est√° validado ‚úÖ. Ahora enfoqu√©monos en tu entrenamiento en IA.",
        statusTokenInvalid:
          "Tokken inv√°lido o expirado ¬∑ pega tu Tokken Esteborg Members para continuar.",
        statusDemoActive:
          "Modo demo activo ¬∑ si generas tu Tokken Esteborg Members conservar√°s acceso completo.",
        statusDemoEnded:
          "La demo ha terminado ¬∑ genera tu Tokken Esteborg Members para seguir con acceso completo.",
        statusTTSOn: "Voz Esteborg activada.",
        statusTTSOff: "Voz Esteborg desactivada.",
        voiceToggleLabel: "Voz Esteborg activada",
        voicePill: "Voz Esteborg",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Si a√∫n no tienes token, puedes obtenerlo o recuperarlo en: https://membersvip.esteborg.live/#miembrosvip",
        topAccessLabel: "Acceso exclusivo ¬∑ Tokken Esteborg Members",
    topAccessSubtext:
      "Tu sesi√≥n se enfoca en ti: claridad total, aprendizaje real y resultados con IA.",
    programSwitchLabel: "PROGRAMA ESTEBORG IA ‚Äì DESPLIEGA TODO TU PODER",
    footerOwnership:
      "Propiedad de Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg ¬∑ esteborg.com",
      },
      en: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Executive Program ¬∑ Professional AI Coach",
        bannerDesc:
          "Esteborg IA ‚Äì Unleash Your Power is your executive program to use AI as a real advantage in your work, business and life.",
        panelTitle: "Mini Training ¬∑ Esteborg IA ‚Äì Unleash Your Power",
        chipsLabel: "Start training:",
        btnLesson: "Learn AI from scratch",
        btnLessonText:
          "I want to learn Artificial Intelligence from scratch and start with Module 1: AI Fundamentals.",
        btnEmotion: "Apply AI in my work",
        btnEmotionText:
          "I want to apply AI in my job or business and design a practical plan with you.",
        btnChallenge: "Master ChatGPT & other AIs",
        btnChallengeText:
          "Give me practical challenges to master ChatGPT and other AIs in the next 90 days.",
        contentLabel: "Program tools:",
        btnSlides: "Program structure",
        btnSlidesText:
          "Show me the full structure of the Esteborg IA ‚Äì Unleash Your Power program.",
        btnSummary: "Automate tasks with AI",
        btnSummaryText:
          "Help me automate tasks with AI using no-code tools, agents and smart flows.",
        chatName: "Esteborg",
        chatRole: "PROFESSIONAL ARTIFICIAL INTELLIGENCE COACH",
        inputPlaceholder:
          "Tell me what you want to achieve with Artificial Intelligence in your work, business or projects...",
        inputMeta:
          "Your Esteborg IA coach will adapt the training to your goals.",
        statusInitial: "Preparing your training with Esteborg IA...",
        statusTokenValid:
          "Your Esteborg Members Tokken is validated ‚úÖ ¬∑ Members VIP mode.",
        statusTokenInvalid:
          "Invalid or expired Tokken ¬∑ paste your Esteborg Members Tokken to continue.",
        statusDemoActive:
          "Demo mode active ¬∑ if you generate your Esteborg Members Tokken you‚Äôll keep full access.",
        statusDemoEnded:
          "Demo ended ¬∑ generate your Esteborg Members Tokken to keep access.",
        statusTTSOn: "Esteborg Voice activated.",
        statusTTSOff: "Esteborg Voice deactivated.",
        voiceToggleLabel: "Esteborg Voice activated",
        voicePill: "Esteborg Voice",
        footerTokenTitle: "Esteborg Members Tokken",
        footerTokenText:
          "If you don‚Äôt have your token yet, get or recover it at: https://membersvip.esteborg.live/#miembrosvip",
        topAccessLabel: "Exclusive access ¬∑ Esteborg Members Token",
    topAccessSubtext:
      "Your session is built around you: clarity, real learning and practical AI results.",
    programSwitchLabel: "ESTEBORG IA PROGRAM ‚Äì UNLEASH ALL YOUR POWER",
    footerOwnership:
      "Property of Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg ¬∑ esteborg.com",
  },
      pt: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Programa executivo ¬∑ Coach profissional em IA",
        bannerDesc:
          "Esteborg IA ‚Äì Desperte todo o seu poder √© o seu programa executivo para usar a IA como vantagem real no trabalho e nos neg√≥cios.",
        panelTitle: "Mini treinamento ¬∑ Esteborg IA ‚Äì Desperte todo o seu poder",
        chipsLabel: "Come√ßar o treinamento:",
        btnLesson: "Aprender IA do zero",
        btnLessonText:
          "Quero aprender Intelig√™ncia Artificial do zero e come√ßar pelo M√≥dulo 1: Fundamentos de IA.",
        btnEmotion: "Aplicar IA no meu trabalho",
        btnEmotionText:
          "Quero aplicar IA no meu trabalho ou neg√≥cio e desenhar com voc√™ um plano pr√°tico.",
        btnChallenge: "Dominar o ChatGPT e outras IAs",
        btnChallengeText:
          "Quero desafios pr√°ticos para dominar o ChatGPT e outras IAs nos pr√≥ximos 90 dias.",
        contentLabel: "Ferramentas do programa:",
        btnSlides: "Estrutura do programa",
        btnSlidesText:
          "Mostre a estrutura completa do programa Esteborg IA ‚Äì Desperte todo o seu poder.",
        btnSummary: "Automatizar tarefas com IA",
        btnSummaryText:
          "Quero que voc√™ me ajude a automatizar tarefas com IA usando ferramentas no-code, agentes e fluxos inteligentes.",
        chatName: "Esteborg",
        chatRole: "COACH PROFISSIONAL EM INTELIG√äNCIA ARTIFICIAL",
        inputPlaceholder:
          "Conte-me o que voc√™ quer alcan√ßar com IA no seu trabalho, neg√≥cio ou projetos...",
        inputMeta:
          "Seu coach Esteborg IA vai adaptar o treinamento aos seus objetivos.",
        statusInitial: "Preparando o seu treinamento com Esteborg IA...",
        statusTokenValid:
          "Seu Tokken Esteborg Members j√° est√° validado ‚úÖ ¬∑ Modo Members VIP.",
        statusTokenInvalid:
          "Tokken inv√°lido ou expirado ¬∑ cole o seu Tokken Esteborg Members para continuar.",
        statusDemoActive:
          "Modo demo ativo ¬∑ se voc√™ gerar o seu Tokken Esteborg Members manter√° o acesso completo.",
        statusDemoEnded:
          "Demo encerrada ¬∑ gere o seu Tokken Esteborg Members para continuar com acesso.",
        statusTTSOn: "Voz Esteborg ativada.",
        statusTTSOff: "Voz Esteborg desativada.",
        voiceToggleLabel: "Voz Esteborg ativada",
        voicePill: "Voz Esteborg",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Se ainda n√£o tem token, acesse: https://membersvip.esteborg.live/#miembrosvip",
      topAccessLabel: "Acesso exclusivo ¬∑ Tokken Esteborg Members",
    topAccessSubtext:
      "Sua sess√£o √© focada em voc√™: clareza total, aprendizado real e resultados pr√°ticos com IA.",
    programSwitchLabel:
      "PROGRAMA ESTEBORG IA ‚Äì LIBERE TODO O SEU PODER",
    footerOwnership:
      "Propriedade de Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg ¬∑ esteborg.com",
  },
      fr: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Programme ex√©cutif ¬∑ Coach professionnel en IA",
        bannerDesc:
          "Esteborg IA est ton programme ex√©cutif pour utiliser l‚ÄôIA comme un v√©ritable avantage dans ton travail et ton business.",
        panelTitle: "Mini entra√Ænement ¬∑ Esteborg IA",
        chipsLabel: "Commencer l‚Äôentra√Ænement :",
        btnLesson: "Apprendre l‚ÄôIA depuis z√©ro",
        btnLessonText:
          "Je veux apprendre l‚ÄôIntelligence Artificielle depuis z√©ro et commencer par le Module 1 : Fondamentaux de l‚ÄôIA.",
        btnEmotion: "Appliquer l‚ÄôIA dans mon travail",
        btnEmotionText:
          "Je veux appliquer l‚ÄôIA dans mon travail ou mon entreprise et construire avec toi un plan pratique.",
        btnChallenge: "Ma√Ætriser ChatGPT et d‚Äôautres IA",
        btnChallengeText:
          "Donne-moi des d√©fis pratiques pour ma√Ætriser ChatGPT et d‚Äôautres IA dans les 90 prochains jours.",
        contentLabel: "Outils du programme :",
        btnSlides: "Structure du programme",
        btnSlidesText:
          "Montre-moi la structure compl√®te du programme Esteborg IA.",
        btnSummary: "Automatiser des t√¢ches avec l‚ÄôIA",
        btnSummaryText:
          "Aide-moi √† automatiser des t√¢ches avec l‚ÄôIA gr√¢ce √† des outils no-code, des agents et des flux intelligents.",
        chatName: "Esteborg",
        chatRole: "COACH PROFESSIONNEL EN INTELLIGENCE ARTIFICIELLE",
        inputPlaceholder:
          "Dis-moi ce que tu veux accomplir avec l‚ÄôIA dans ton travail, ton business ou tes projets...",
        inputMeta:
          "Ton coach Esteborg IA adaptera l‚Äôentra√Ænement √† tes objectifs.",
        statusInitial: "Pr√©paration de ton entra√Ænement avec Esteborg IA...",
        statusTokenValid:
          "Ton Tokken Esteborg Members est valid√© ‚úÖ ¬∑ Mode Members VIP.",
        statusTokenInvalid:
          "Tokken invalide ou expir√© ¬∑ colle ton Tokken Esteborg Members pour continuer.",
        statusDemoActive:
          "Mode d√©mo actif ¬∑ si tu g√©n√®res ton Tokken Esteborg Members, tu garderas l‚Äôacc√®s complet.",
        statusDemoEnded:
          "D√©mo termin√©e ¬∑ g√©n√®re ton Tokken Esteborg Members pour conserver l‚Äôacc√®s.",
        statusTTSOn: "Voix Esteborg activ√©e.",
        statusTTSOff: "Voix Esteborg d√©sactiv√©e.",
        voiceToggleLabel: "Voix Esteborg activ√©e",
        voicePill: "Voix Esteborg",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Si tu n‚Äôas pas encore de token, r√©cup√®re-le ici : https://membersvip.esteborg.live/#miembrosvip",
      topAccessLabel: "Acc√®s exclusif ¬∑ Tokken Esteborg Members",
    topAccessSubtext:
      "Ta session est centr√©e sur toi : clart√©, apprentissage r√©el et r√©sultats concrets avec l‚ÄôIA.",
    programSwitchLabel:
      "PROGRAMME ESTEBORG IA ‚Äì D√âCHA√éNE TOUT TON POUVOIR",
    footerOwnership:
      "Propri√©t√© de Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg ¬∑ esteborg.com",
  },
      it: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Programma executive ¬∑ Coach professionale di IA",
        bannerDesc:
          "Esteborg IA ‚Äì Sprigiona tutto il tuo potere √® il tuo programma executive per usare l‚ÄôIA come vero vantaggio nel lavoro e nel business.",
        panelTitle: "Mini training ¬∑ Esteborg IA ‚Äì Sprigiona tutto il tuo potere",
        chipsLabel: "Inizia l‚Äôallenamento:",
        btnLesson: "Imparare l‚ÄôIA da zero",
        btnLessonText:
          "Voglio imparare l‚ÄôIntelligenza Artificiale da zero e iniziare dal Modulo 1: Fondamenti di IA.",
        btnEmotion: "Applicare l‚ÄôIA nel mio lavoro",
        btnEmotionText:
          "Voglio applicare l‚ÄôIA nel mio lavoro o nel mio business e creare con te un piano pratico.",
        btnChallenge: "Dominare ChatGPT e altre IA",
        btnChallengeText:
          "Dammi sfide pratiche per dominare ChatGPT e altre IA nei prossimi 90 giorni.",
        contentLabel: "Strumenti del programma:",
        btnSlides: "Struttura del programma",
        btnSlidesText:
          "Mostrami la struttura completa del programma Esteborg IA.",
        btnSummary: "Automatizzare compiti con l‚ÄôIA",
        btnSummaryText:
          "Aiutami ad automatizzare compiti con l‚ÄôIA tramite strumenti no-code, agenti e flussi intelligenti.",
        chatName: "Esteborg",
        chatRole: "COACH PROFESSIONALE DI INTELLIGENZA ARTIFICIALE",
        inputPlaceholder:
          "Raccontami cosa vuoi ottenere con l‚ÄôIA nel tuo lavoro, business o progetti...",
        inputMeta:
          "Il tuo coach Esteborg IA adatter√† il percorso ai tuoi obiettivi.",
        statusInitial: "Preparando il tuo allenamento con Esteborg IA...",
        statusTokenValid:
          "Il tuo Tokken Esteborg Members √® stato validato ‚úÖ ¬∑ Modalit√† Members VIP.",
        statusTokenInvalid:
          "Tokken non valido o scaduto ¬∑ incolla il tuo Tokken Esteborg Members per continuare.",
        statusDemoActive:
          "Modalit√† demo attiva ¬∑ se generi il tuo Tokken Esteborg Members manterrai l‚Äôaccesso completo.",
        statusDemoEnded:
          "Demo terminata ¬∑ genera il tuo Tokken Esteborg Members per continuare ad avere accesso.",
        statusTTSOn: "Voce Esteborg attivata.",
        statusTTSOff: "Voce Esteborg disattivata.",
        voiceToggleLabel: "Voce Esteborg attivata",
        voicePill: "Voce Esteborg",
        footerTokenTitle: "Tokken Esteborg Members",
        footerTokenText:
          "Se non hai ancora il token, recuperalo su: https://membersvip.esteborg.live/#miembrosvip",
    topAccessLabel: "Accesso esclusivo ¬∑ Tokken Esteborg Members",
    topAccessSubtext:
      "La tua sessione √® costruita su di te: chiarezza totale, apprendimento reale e risultati pratici con l‚ÄôIA.",
    programSwitchLabel:
      "PROGRAMMA ESTEBORG IA ‚Äì LIBERA TUTTO IL TUO POTERE",
    footerOwnership:
      "Propriet√† di Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg ¬∑ esteborg.com",
  },
      de: {
        bannerMain: "ESTEBORG EXECUTIVE ¬∑ MEMBERS VIP",
        bannerSub: "Executive-Programm ¬∑ Professioneller KI-Coach",
        bannerDesc:
          "Esteborg IA ‚Äì Entfessle deine Kraft ist dein Executive-Programm, um KI als echten Vorteil in Job und Business zu nutzen.",
        panelTitle: "Mini-Training ¬∑ Esteborg IA ‚Äì Entfessle deine Kraft",
        chipsLabel: "Training starten:",
        btnLesson: "KI von Grund auf lernen",
        btnLessonText:
          "Ich m√∂chte K√ºnstliche Intelligenz von Grund auf lernen und mit Modul 1: Grundlagen der KI beginnen.",
        btnEmotion: "KI in meinem Job anwenden",
        btnEmotionText:
          "Ich m√∂chte KI in meinem Job oder Business anwenden und mit dir einen praktischen Plan entwickeln.",
        btnChallenge: "ChatGPT & andere KIs meistern",
        btnChallengeText:
          "Gib mir praktische Challenges, um ChatGPT und andere KIs in den n√§chsten 90 Tagen zu meistern.",
        contentLabel: "Programm-Tools:",
        btnSlides: "Programmstruktur",
        btnSlidesText:
          "Zeig mir die vollst√§ndige Struktur des Programms Esteborg IA ‚Äì Entfessle deine Kraft.",
        btnSummary: "Aufgaben mit KI automatisieren",
        btnSummaryText:
          "Hilf mir, Aufgaben mit KI √ºber No-Code-Tools, Agenten und intelligente Workflows zu automatisieren.",
        chatName: "Esteborg",
        chatRole: "PROFESSIONELLER KI-COACH",
        inputPlaceholder:
          "Erz√§hl mir, was du mit KI in deinem Job, Business oder Projekten erreichen willst...",
        inputMeta:
          "Dein Esteborg-IA-Coach passt das Training an deine Ziele an.",
        statusInitial: "Dein Training mit Esteborg IA wird vorbereitet...",
        statusTokenValid:
          "Esteborg-Members-Tokken validiert ‚úÖ ¬∑ Members-VIP-Modus.",
        statusTokenInvalid:
          "Tokken ung√ºltig oder abgelaufen ¬∑ f√ºge deinen Esteborg-Members-Tokken ein.",
        statusDemoActive:
          "Demo aktiv ¬∑ wenn du dein Esteborg-Members-Tokken generierst, beh√§ltst du den vollen Zugriff.",
        statusDemoEnded:
          "Demo beendet ¬∑ generiere dein Esteborg-Members-Tokken, um Zugriff zu behalten.",
        statusTTSOn: "Esteborg-Stimme aktiviert.",
        statusTTSOff: "Esteborg-Stimme deaktiviert.",
        voiceToggleLabel: "Esteborg-Stimme aktiviert",
        voicePill: "Esteborg-Stimme",
        footerTokenTitle: "Esteborg-Members-Tokken",
        footerTokenText:
          "Wenn du noch keinen Token hast, bekommst du ihn hier: https://membersvip.esteborg.live/#miembrosvip",
      topAccessLabel: "Exklusiver Zugang ¬∑ Esteborg Members Token",
    topAccessSubtext:
      "Deine Session konzentriert sich auf dich: Klarheit, echtes Lernen und praktische KI-Ergebnisse.",
    programSwitchLabel:
      "ESTEBORG IA PROGRAMM ‚Äì ENTFESSELE DEINE GESAMTE MACHT",
    footerOwnership:
      "Eigentum von Esteban Manuel Gonz√°lez C√°rdenas ¬∑ Esteborg ¬∑ esteborg.com",
  },
    };

    // ========== ESTADO GLOBAL ==========
    let currentLang = "es";
    let history = [];
    let VIP_TOKEN = null;
    let isSending = false;
    let isListening = false;
    let isTTSOn = false; // voz apagada por default
    let recognition = null;
    let currentAudio = null;

    const VIP_STORAGE_KEY = "esteborg_vip_token";

    // Mensajes iniciales y de validaci√≥n por idioma
    const WELCOME_MESSAGES = {
      es: `¬°Qu√© gusto saludarte! üòä Antes de entrar a tu entrenamiento necesito tu Tokken Esteborg Members para validar tu acceso.

Si a√∫n no tienes token, puedes obtenerlo o recuperarlo en:
https://membersvip.esteborg.live/#miembrosvip

Una vez que tengas tu Tokken, p√©galo aqu√≠ o accede desde tu panel Members VIP. Despu√©s elige el idioma en la parte superior (ES, EN, PT, FR, IT, DE) y comenzamos.`,
      en: `Great to see you! üòä Before we start your training I need your Esteborg Members Tokken to validate your access.

If you don't have a token yet, you can get or recover it at:
https://membersvip.esteborg.live/#miembrosvip

Once you have your Tokken, paste it here or access from your Members VIP panel. Then choose your language at the top (ES, EN, PT, FR, IT, DE) and we begin.`,
      pt: `Que bom falar com voc√™! üòä Antes de come√ßar o seu treinamento preciso do seu Tokken Esteborg Members para validar o acesso.

Se ainda n√£o tem token, voc√™ pode obt√™-lo ou recuper√°-lo em:
https://membersvip.esteborg.live/#miembrosvip

Quando tiver o seu Tokken, cole aqui ou acesse pelo painel Members VIP. Depois escolha o idioma no topo (ES, EN, PT, FR, IT, DE) e come√ßamos.`,
      fr: `Ravi de te voir ! üòä Avant de d√©marrer ton entra√Ænement, j'ai besoin de ton Tokken Esteborg Members pour valider ton acc√®s.

Si tu n'as pas encore de token, tu peux l'obtenir ou le r√©cup√©rer ici :
https://membersvip.esteborg.live/#miembrosvip

Une fois que tu as ton Tokken, colle-le ici ou passe par ton espace Members VIP. Ensuite choisis la langue en haut (ES, EN, PT, FR, IT, DE) et on commence.`,
      it: `Che piacere salutarti! üòä Prima di iniziare il tuo allenamento ho bisogno del tuo Tokken Esteborg Members per convalidare l'accesso.

Se non hai ancora il token, puoi ottenerlo o recuperarlo su:
https://membersvip.esteborg.live/#miembrosvip

Quando avrai il tuo Tokken, incollalo qui o accedi dal pannello Members VIP. Poi scegli la lingua in alto (ES, EN, PT, FR, IT, DE) e iniziamo.`,
      de: `Wie sch√∂n, dich zu sehen! üòä Bevor wir mit deinem Training starten, brauche ich dein Esteborg Members Tokken, um deinen Zugriff zu pr√ºfen.

Wenn du noch kein Token hast, kannst du es hier bekommen oder wiederherstellen:
https://membersvip.esteborg.live/#miembrosvip

Sobald du dein Tokken hast, f√ºge es hier ein oder greife √ºber dein Members-VIP-Panel zu. Danach w√§hle oben die Sprache (ES, EN, PT, FR, IT, DE) und wir legen los.`,
    };

    const TOKEN_VALID_MESSAGES = {
      es: "Perfecto, ya tengo tu Tokken Esteborg Members ‚úÖ. Ahora cu√©ntame qu√© quieres lograr con IA en los pr√≥ximos 90 d√≠as.",
      en: "Perfect, I already have your Esteborg Members Tokken ‚úÖ. Now tell me what you want to achieve with AI in the next 90 days.",
      pt: "Perfeito, j√° tenho o seu Tokken Esteborg Members ‚úÖ. Agora me conte o que voc√™ quer conquistar com IA nos pr√≥ximos 90 dias.",
      fr: "Parfait, j'ai d√©j√† ton Tokken Esteborg Members ‚úÖ. Maintenant dis-moi ce que tu veux accomplir avec l'IA dans les 90 prochains jours.",
      it: "Perfetto, ho gi√† il tuo Tokken Esteborg Members ‚úÖ. Ora dimmi cosa vuoi ottenere con l'IA nei prossimi 90 giorni.",
      de: "Perfekt, ich habe dein Esteborg Members Tokken ‚úÖ. Jetzt erz√§hl mir, was du in den n√§chsten 90 Tagen mit KI erreichen m√∂chtest.",
    };

    function showWelcomeMessage() {
      const log = $("chat-log");
      if (!log) return;

      log.innerHTML = "";
      history = [];

      const msg = WELCOME_MESSAGES[currentLang] || WELCOME_MESSAGES.es;
      appendMessage("assistant", msg);
      history.push({ role: "assistant", content: msg });
      playTTS(msg);
    }

    // ========== HELPERS ==========
    const $ = (id) => document.getElementById(id);

    function t(key) {
      const pack = I18N[currentLang] || I18N["es"];
      return pack[key] ?? I18N["es"][key] ?? "";
    }

    function setText(id, text) {
      const el = $(id);
      if (el) el.textContent = text;
    }

    function setStatus(key) {
      const el = $("status-line");
      if (!el) return;
      const pack = I18N[currentLang] || I18N["es"];
      if (pack[key]) {
        el.textContent = pack[key];
      } else if (typeof key === "string") {
        el.textContent = key;
      }
    }

    // ========== TOKEN HELPERS ==========
    function getVIPTokenFromURL() {
      try {
        const url = new URL(window.location.href);
        const tkn = url.searchParams.get("token");
        return tkn && tkn.trim() ? tkn.trim() : null;
      } catch (e) {
        return null;
      }
    }

    function getVIPTokenFromStorage() {
      try {
        const stored = localStorage.getItem(VIP_STORAGE_KEY);
        return stored && stored.trim() ? stored.trim() : null;
      } catch (e) {
        return null;
      }
    }

    function saveVIPToken(token) {
      if (!token) return;
      VIP_TOKEN = token;
      try {
        localStorage.setItem(VIP_STORAGE_KEY, token);
      } catch (e) {}
    }

    function bootstrapTokenStatus() {
      const urlToken = getVIPTokenFromURL();
      const storedToken = getVIPTokenFromStorage();
      const effectiveToken = urlToken || storedToken || null;

      if (urlToken && urlToken !== storedToken) {
        saveVIPToken(urlToken);
      } else if (storedToken) {
        VIP_TOKEN = storedToken;
      }

      if (effectiveToken) {
        VIP_TOKEN = effectiveToken;
        setStatus("statusTokenValid");
      } else {
        setStatus("statusInitial");
      }
    }

    // ========== UI / LENGUAJE ==========
    function applyLanguage(lang) {
  if (!I18N[lang]) lang = "es";
  currentLang = lang;

  // Textos principales
  setText("i-banner-main", t("bannerMain"));
  setText("i-banner-sub", t("bannerSub"));
  setText("i-banner-desc", t("bannerDesc"));
  setText("i-access-pill", t("accessPill"));
  setText("i-access-desc", t("accessDescription"));
  setText("i-panel-title", t("panelTitle"));
  setText("i-panel-title", t("panelTitle"));
  setText("i-chips-label", t("chipsLabel"));
  setText("i-content-label", t("contentLabel"));
  setText("i-chat-name", t("chatName"));
  setText("i-chat-role", t("chatRole"));
  setText("i-footer-token-title", t("footerTokenTitle"));
  const footerToken = $("i-footer-token-text");
  if (footerToken) footerToken.textContent = t("footerTokenText");

  const inputEl = $("user-input");
  if (inputEl) {
    inputEl.placeholder = t("inputPlaceholder");
  }

  // L√≠nea de estado inicial bajo el input
  const meta = $("status-line");
  if (meta && I18N[currentLang].statusInitial) {
    meta.textContent = t("statusInitial");
  }

  // Texto del switch de voz
  const voiceLabel = $("i-voice-toggle-label");
  if (voiceLabel) voiceLabel.textContent = t("voiceToggleLabel");
  const voicePill = $("i-voice-pill");
  if (voicePill) voicePill.textContent = t("voicePill");

  // üîπ Botones de chips (los que ves en la parte de arriba)
  setText("i-btn-lesson", t("btnLesson"));
  setText("i-btn-emotion", t("btnEmotion"));
  setText("i-btn-challenge", t("btnChallenge"));
  setText("i-btn-slides", t("btnSlides"));
  setText("i-btn-summary", t("btnSummary"));

  // Idioma activo en el selector
  document
    .querySelectorAll(".lang-option")
    .forEach((btn) => {
      const btnLang = btn.getAttribute("data-lang");
      btn.classList.toggle("active", btnLang === currentLang);
    });
}

    function appendMessage(role, content) {
      const log = $("chat-log");
      if (!log) return;
      const wrapper = document.createElement("div");
      wrapper.className =
        "message " + (role === "assistant" ? "assistant" : "user");
      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = content;
      wrapper.appendChild(bubble);
      log.appendChild(wrapper);
      log.scrollTop = log.scrollHeight;
    }

    function stopTTS() {
      if (currentAudio) {
        try {
          currentAudio.pause();
          URL.revokeObjectURL(currentAudio.src);
        } catch (e) {}
        currentAudio = null;
      }
    }

    async function playTTS(text) {
      if (!isTTSOn || !text) return;
      try {
        stopTTS();
        const trimmed = text.length > 450 ? text.slice(0, 450) : text;
        const res = await fetch(TTS_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            text: trimmed,
            voiceId: "IdhxxSTaAg80CTeSgScm",
          }),
        });
        if (!res.ok) {
          console.error("[TTS] API error", await res.text());
          return;
        }
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        const audio = new Audio(url);
        currentAudio = audio;
        audio.play().catch((err) => {
          console.error("[TTS] play error", err);
        });
      } catch (err) {
        console.error("[TTS] general error", err);
      }
    }

    // ========== ENV√çO DE MENSAJES ==========
    async function sendMessage(optionalText) {
      const inputEl = $("user-input");
      const sendBtn = $("send-btn");
      const micBtn = $("mic-btn");

      let text = (optionalText || (inputEl && inputEl.value) || "").trim();
      if (!text || isSending) return;

      // ¬øParece un Tokken pegado?
      const candidate = text.replace(/\s+/g, "");
      const looksLikeToken =
        candidate.length > 40 &&
        /^[A-Za-z0-9+/=_-]+$/.test(candidate) &&
        !candidate.includes(".");

      if (!optionalText && looksLikeToken && !text.includes(" ")) {
        // Guardamos Tokken pero NO lo mandamos al backend
        saveVIPToken(candidate);

        appendMessage("user", text);

        // Mensaje de validaci√≥n seg√∫n idioma
        const tokenMsg =
          TOKEN_VALID_MESSAGES[currentLang] || TOKEN_VALID_MESSAGES.es;
        appendMessage("assistant", tokenMsg);
        history.push({ role: "assistant", content: tokenMsg });
        playTTS(tokenMsg);

        if (inputEl) inputEl.value = "";
        setStatus("statusTokenValid");
        return;
      }

      // Mensaje normal al backend
      appendMessage("user", text);
      history.push({ role: "user", content: text });
      if (inputEl) inputEl.value = "";

      isSending = true;
      if (sendBtn) sendBtn.disabled = true;
      if (inputEl) inputEl.disabled = true;
      if (micBtn) micBtn.disabled = true;

      setStatus("Conectando con Esteborg IA...");

      try {
        const tokenToSend = VIP_TOKEN || getVIPTokenFromStorage() || null;

        const resp = await fetch(API_BASE + "/api/modules/iavipcom", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            message: text,
            rawToken: tokenToSend,
            userName: null,
            history,
            lang: currentLang,
          }),
        });

        if (!resp.ok) {
          throw new Error("HTTP " + resp.status);
        }

        const data = await resp.json();
        const reply =
          data.reply ||
          "No tengo una respuesta en este momento, intenta de nuevo.";

        appendMessage("assistant", reply);
        history.push({ role: "assistant", content: reply });
        playTTS(reply);

        if (data.tokenStatus === "valid") {
          setStatus("statusTokenValid");
        } else if (data.tokenStatus === "invalid") {
          setStatus("statusTokenInvalid");
        } else {
          setStatus("statusInitial");
        }
      } catch (err) {
        console.error("[IA] Error al enviar mensaje:", err);
        appendMessage(
          "assistant",
          "Tuvimos un problema al conectar con Esteborg IA. Verifica tu conexi√≥n o intenta en unos momentos."
        );
      } finally {
        isSending = false;
        if (sendBtn) sendBtn.disabled = false;
        if (inputEl) inputEl.disabled = false;
        if (micBtn) micBtn.disabled = false;
        if (inputEl) inputEl.focus();
      }
    }

    // ========== VOZ / MICRO ==========
    function initSpeechRecognition() {
      const SpeechRecognition =
        window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) return null;

      const rec = new SpeechRecognition();
      rec.lang =
        currentLang === "en"
          ? "en-US"
          : currentLang === "pt"
          ? "pt-BR"
          : currentLang === "fr"
          ? "fr-FR"
          : currentLang === "it"
          ? "it-IT"
          : currentLang === "de"
          ? "de-DE"
          : "es-MX";
      rec.continuous = false;
      rec.interimResults = false;

      rec.addEventListener("start", () => {
        isListening = true;
        setStatus("Escuchando...");
      });

      rec.addEventListener("end", () => {
        isListening = false;
        setStatus("statusInitial");
      });

      rec.addEventListener("result", (event) => {
        const transcript = Array.from(event.results)
          .map((r) => r[0].transcript)
          .join(" ");
        const inputEl = $("user-input");
        if (inputEl) {
          inputEl.value = transcript;
        }
      });

      return rec;
    }

    // ========== INIT ==========
    document.addEventListener("DOMContentLoaded", () => {
      // Idioma inicial
      applyLanguage("es");

      // Tokken desde URL / localStorage
      bootstrapTokenStatus();

      // Mensaje de bienvenida en el chat seg√∫n idioma
      showWelcomeMessage();

      // Listeners de idioma
      document.querySelectorAll(".lang-option").forEach((btn) => {
        btn.addEventListener("click", () => {
          const lang = btn.getAttribute("data-lang") || "es";
          applyLanguage(lang);
          showWelcomeMessage();
          setStatus("statusInitial");
        });
      });

      // Chips de inicio r√°pido
      const btnLesson = $("i-btn-lesson");
      if (btnLesson) {
        btnLesson.addEventListener("click", () =>
          sendMessage(t("btnLessonText"))
        );
      }

      const btnEmotion = $("i-btn-emotion");
      if (btnEmotion) {
        btnEmotion.addEventListener("click", () =>
          sendMessage(t("btnEmotionText"))
        );
      }

      const btnChallenge = $("i-btn-challenge");
      if (btnChallenge) {
        btnChallenge.addEventListener("click", () =>
          sendMessage(t("btnChallengeText"))
        );
      }

      const btnSlides = $("i-btn-slides");
      if (btnSlides) {
        btnSlides.addEventListener("click", () =>
          sendMessage(t("btnSlidesText"))
        );
      }

      const btnSummary = $("i-btn-summary");
      if (btnSummary) {
        btnSummary.addEventListener("click", () =>
          sendMessage(t("btnSummaryText"))
        );
      }

      // Enviar por bot√≥n y Enter
      const sendBtn = $("send-btn");
      const inputEl = $("user-input");

      if (sendBtn) {
        sendBtn.addEventListener("click", () => sendMessage());
      }

      if (inputEl) {
        inputEl.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
          }
        });
      }

      // TTS toggle (voz Esteborg)
      const ttsToggle = $("tts-toggle");
      if (ttsToggle) {
        // Estado inicial: apagado por defecto
        ttsToggle.classList.toggle("off", !isTTSOn);

        ttsToggle.addEventListener("click", () => {
          isTTSOn = !isTTSOn;
          ttsToggle.classList.toggle("off", !isTTSOn);
          if (!isTTSOn) {
            stopTTS();
            setStatus("statusTTSOff");
          } else {
            setStatus("statusTTSOn");
          }
        });
      }

      // Micro
      recognition = initSpeechRecognition();
      const micBtn = $("mic-btn");
      if (micBtn && recognition) {
        micBtn.addEventListener("click", () => {
          if (isListening) {
            recognition.stop();
          } else {
            recognition.start();
          }
        });
      } else if (micBtn && !recognition) {
        micBtn.disabled = true;
        micBtn.title =
          "Reconocimiento de voz no disponible en este navegador.";
      }
    });
  
  </script>
</body>
</html>
